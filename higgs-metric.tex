\documentclass[12pt,letterpaper,reqno]{article}

% \usepackage{mathtools}
\usepackage{epsfig}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{indentfirst}
\usepackage{xspace}
\usepackage{multirow}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{verbatim}
\usepackage[letterpaper,margin=1in,headheight=15pt]{geometry}
\usepackage{mathpazo}
\usepackage{tikz-cd}
\usepackage{booktabs}
\usepackage{framed}
\usepackage{float}
\usepackage{thmtools}
\usepackage{dashrule}
\usepackage[missing=]{gitinfo2}
\usepackage{fancyhdr}

\definecolor{darkblue}{rgb}{0.1,0.1,0.7}
\definecolor{darkred}{rgb}{0.5,0.1,0.1}
\definecolor{darkgreen}{rgb}{0.0,0.42,0.06}
\hypersetup{colorlinks=true,urlcolor=darkred,linkcolor=darkblue,citecolor=darkred}
\definecolor{shadecolor}{rgb}{0.85,0.85,0.85}

% Bibliography formatting
\usepackage[bibstyle=authoryear-comp,labeldate=false,defernumbers=true,maxnames=20,uniquename=init,dashed=false,backend=biber,sorting=none]{biblatex}

\DeclareNameAlias{sortname}{first-last}

\DeclareFieldFormat{url}{\url{#1}}
\DeclareFieldFormat[article]{pages}{#1}
\DeclareFieldFormat[inproceedings]{pages}{\lowercase{pp.}#1}
\DeclareFieldFormat[incollection]{pages}{\lowercase{pp.}#1}
\DeclareFieldFormat[article]{volume}{\textbf{#1}}
\DeclareFieldFormat[article]{number}{(#1)}
\DeclareFieldFormat[article]{title}{\MakeCapital{#1}}
\DeclareFieldFormat[inproceedings]{title}{#1}
\DeclareFieldFormat{shorthandwidth}{#1}

% Don't use "In:" in bibliography. Omit urls from journal articles.
\DeclareBibliographyDriver{article}{%
  \usebibmacro{bibindex}%
  \usebibmacro{begentry}%
  \usebibmacro{author/editor}%
  \setunit{\labelnamepunct}\newblock
  \MakeSentenceCase{\usebibmacro{title}}%
  \newunit
  \printlist{language}%
  \newunit\newblock
  \usebibmacro{byauthor}%
  \newunit\newblock
  \usebibmacro{byeditor+others}%
  \newunit\newblock
  \printfield{version}%
  \newunit\newblock
%  \usebibmacro{in:}%
  \usebibmacro{journal+issuetitle}%
  \newunit\newblock
  \printfield{note}%
  \setunit{\bibpagespunct}%
  \printfield{pages}
  \newunit\newblock
  \usebibmacro{eprint}
  \newunit\newblock
  \printfield{addendum}%
  \newunit\newblock
  \usebibmacro{pageref}%
  \usebibmacro{finentry}}

% Remove dot between volume and number in journal articles.
\renewbibmacro*{journal+issuetitle}{%
  \usebibmacro{journal}%
  \setunit*{\addspace}%
  \iffieldundef{series}
    {}
    {\newunit
     \printfield{series}%
     \setunit{\addspace}}%
  \printfield{volume}%
%  \setunit*{\adddot}%
  \printfield{number}%
  \setunit{\addcomma\space}%
  \printfield{eid}%
  \setunit{\addspace}%
  \usebibmacro{issue+date}%
  \newunit\newblock
  \usebibmacro{issue}%
  \newunit}


% Bibliography categories
\def\makebibcategory#1#2{\DeclareBibliographyCategory{#1}\defbibheading{#1}{\section*{#2}}}
\makebibcategory{books}{Books}
\makebibcategory{papers}{Refereed research papers}
\makebibcategory{chapters}{Book chapters}
\makebibcategory{conferences}{Papers in conference proceedings}
\makebibcategory{techreports}{Unpublished working papers}
\makebibcategory{bookreviews}{Book reviews}
\makebibcategory{editorials}{Editorials}
\makebibcategory{phd}{PhD thesis}
\makebibcategory{subpapers}{Submitted papers}
\makebibcategory{curpapers}{Current projects}

\setlength{\bibitemsep}{2.65pt}
\setlength{\bibhang}{.8cm}
\renewcommand{\bibfont}{\small}

\renewcommand*{\bibitem}{\addtocounter{papers}{1}\item \mbox{}\hskip-0.85cm\hbox to 0.85cm{\hfill\arabic{papers}.~~}}
\defbibenvironment{bibliography}
{\list{}
  {\setlength{\leftmargin}{\bibhang}%
   \setlength{\itemsep}{\bibitemsep}%
   \setlength{\parsep}{\bibparsep}}}
{\endlist}
{\bibitem}

\newenvironment{publications}{\section{\LARGE Publications}\label{papersstart}\vspace*{0.2cm}\small
\titlespacing{\section}{0pt}{1.5ex}{1ex}\itemsep=0.00cm
}{\label{papersend}\addtocounter{sumpapers}{-1}\refstepcounter{sumpapers}\label{sumpapers}}

\def\printbib#1{\printbibliography[category=#1,heading=#1]\lastref{sumpapers}}

% Counters for keeping track of papers
\newcounter{papers}\setcounter{papers}{0}
\newcounter{sumpapers}\setcounter{sumpapers}{0}
\def\lastref#1{\addtocounter{#1}{\value{papers}}\setcounter{papers}{0}}

% theorem environments
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,notefont=\normalfont\bfseries, notebraces={(}{)}]{theorem}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont,notefont=\normalfont\bfseries, notebraces={(}{)}]{noital}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont\color{darkgreen},notefont=\normalfont\bfseries, notebraces={(}{)}]{green}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont,notefont=\normalfont\bfseries,qed=$\qedsymbol$,notebraces={(}{)}]{proofstyle}

\declaretheorem[name=Theorem,numberwithin=section,style=theorem]{thm}
\declaretheorem[name=Proposition,sibling=thm,style=theorem]{prop}
\declaretheorem[name=Corollary,sibling=thm,style=theorem]{cor}
\declaretheorem[name=Lemma,sibling=thm,style=theorem]{lem}
\declaretheorem[name=Remark,sibling=thm,style=theorem]{remark}
\declaretheorem[name=Definition,sibling=thm,style=noital]{defn}
\declaretheorem[name=Example,sibling=thm,style=noital]{example}
\declaretheorem[name=Exercise,numberwithin=section,style=green]{exercise}
\declaretheorem[name=Proof,style=proofstyle,numbered=no]{pf}

\numberwithin{equation}{section}


% macros for convenience
\newcommand{\tops}{\texorpdfstring}

\newcommand{\nid}{\noindent}

\newcommand{\fa}{{\mathfrak a}}
\newcommand{\fp}{{\mathfrak p}}
\newcommand{\fk}{{\mathfrak k}}
\newcommand{\fg}{{\mathfrak g}}
\newcommand{\ft}{{\mathfrak t}}
\newcommand{\fh}{{\mathfrak h}}
\newcommand{\fn}{{\mathfrak n}}
\newcommand{\fq}{{\mathfrak q}}
\newcommand{\fm}{{\mathfrak m}}
\newcommand{\fr}{{\mathfrak r}}
\newcommand{\fu}{{\mathfrak u}}
\newcommand{\fG}{{\mathfrak G}}

\newcommand{\cC}{\ensuremath{\mathcal C}}
\newcommand{\cG}{\ensuremath{\mathcal G}}
\newcommand{\cB}{\ensuremath{\mathcal B}}
\newcommand{\cL}{\ensuremath{\mathcal L}}
\newcommand{\cS}{\ensuremath{\mathcal S}}
\newcommand{\cF}{\ensuremath{\mathcal F}}
\newcommand{\cK}{\ensuremath{\mathcal K}}
\newcommand{\cZ}{\ensuremath{\mathcal Z}}
\newcommand{\cM}{\ensuremath{\mathcal M}}
\newcommand{\cN}{\ensuremath{\mathcal N}}
\newcommand{\cO}{\ensuremath{\mathcal O}}
\newcommand{\cH}{\ensuremath{\mathcal H}}
\newcommand{\cX}{\ensuremath{\mathcal X}}
\newcommand{\cY}{\ensuremath{\mathcal Y}}
\newcommand{\cA}{\ensuremath{\mathcal A}}
\newcommand{\cI}{\ensuremath{\mathcal I}}

\newcommand{\R}{\ensuremath{\mathbb R}}
\newcommand{\C}{\ensuremath{\mathbb C}}
\newcommand{\PP}{\ensuremath{\mathbb P}}
\newcommand{\Z}{\ensuremath{\mathbb Z}}
\newcommand{\Q}{\ensuremath{\mathbb Q}}
\newcommand{\A}{\ensuremath{\mathbb A}}
\newcommand{\bbH}{\ensuremath{\mathbb H}}
\newcommand{\bbP}{\ensuremath{\mathbb P}}
\newcommand{\bbI}{\ensuremath{\mathbb I}}
\newcommand{\bS}{\ensuremath{\mathbb S}}

\newcommand{\half}{\ensuremath{\frac{1}{2}}}
\newcommand{\qtr}{\ensuremath{\frac{1}{4}}}
\newcommand{\bq}{{\mathbf q}}
\newcommand{\N}{{\mathcal N}}
\newcommand{\F}{{\mathcal F}}
\newcommand{\HH}{{\mathcal H}}
\newcommand{\LL}{{\mathcal L}}
\newcommand{\RR}{{\mathcal R}}
\newcommand{\V}{{\mathcal V}}
\newcommand{\dirac}{\!\!\not\!\partial}
\newcommand{\Dirac}{\!\!\not\!\!D}
\newcommand{\cE}{{\mathcal E}}
\newcommand{\vs}{\not\!v}
\newcommand{\kahler}{K\"ahler\xspace}
\newcommand{\kq}{/\!\!/}
\newcommand{\kql}[1]{/\!\!/\!\!_#1\,}
\newcommand{\hk}{hyperk\"ahler\xspace}
\newcommand{\Hk}{Hyperk\"ahler\xspace}
\newcommand{\hkq}{/\!\!/\!\!/\!\!/}
\newcommand{\hkql}[1]{/\!\!/\!\!/\!\!/\!\!_#1\,}
\newcommand{\del}{\ensuremath{\partial}}
\newcommand{\delbar}{\ensuremath{\overline{\partial}}}
\newcommand{\I}{{\mathrm i}}
\newcommand{\J}{{\mathrm j}}
\newcommand{\K}{{\mathrm k}}
\newcommand{\e}{{\mathrm e}}
\newcommand\bid{{\mathbf 1}}
\newcommand{\de}{\mathrm{d}}
\newcommand{\ab}{\mathrm{ab}}
\newcommand{\sing}{\mathrm{sing}}
\newcommand{\reg}{\mathrm{reg}}
\newcommand{\vol}{\mathrm{vol}}
\renewcommand{\sf}{\mathrm{sf}}
\newcommand{\inst}{\mathrm{inst}}
\newcommand{\eff}{\mathrm{eff}}
\newcommand{\dR}{\mathrm{dR}}
\newcommand{\closed}{\mathrm{closed}}
\newcommand{\exact}{\mathrm{exact}}
\newcommand{\gauge}{\mathrm{gauge}}
\newcommand{\flavor}{\mathrm{flavor}}

\newcommand{\abs}[1]{\lvert#1\rvert}
\newcommand{\norm}[1]{\lVert#1\rVert}
\newcommand{\IP}[1]{\langle#1\rangle}
\newcommand{\DIP}[1]{\langle\!\langle#1\rangle\!\rangle}
\newcommand{\dwrt}[1]{\frac{\partial}{\partial#1}}
\newcommand{\eps}{\epsilon}
\newcommand{\simarrow}{\xrightarrow\sim}

\newcommand{\bSigma}{{\overline \Sigma}}
\newcommand{\vphi}{{\vec\phi}}

\newcommand{\mmaref}[1]{}

\newcommand{\ti}[1]{\textit{#1}}
\newcommand{\tb}[1]{\textbf{#1}}

\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\im}{Im}
\DeclareMathOperator{\re}{Re}
\DeclareMathOperator{\Tr}{Tr}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\Lie}{Lie}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\Bun}{Bun}
\DeclareMathOperator{\Vect}{Vect}
\DeclareMathOperator{\Span}{Span}
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\ind}{ind}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\Jac}{Jac}
\DeclareMathOperator{\Pic}{Pic}
\DeclareMathOperator{\Prym}{Prym}
\DeclareMathOperator{\Hol}{Hol}
\DeclareMathOperator{\gr}{gr}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\Tot}{Tot}
\DeclareMathOperator{\pdeg}{pdeg}
\DeclareMathOperator{\Gr}{Gr}

\newcommand{\SU}{\mathrm{SU}}
\newcommand{\Sp}{\mathrm{Sp}}
\newcommand{\U}{\mathrm{U}}

\newcommand{\insfig}[2]{

\medskip
\noindent
\begin{minipage}{\linewidth}

\makebox[\linewidth]{\includegraphics[keepaspectratio=true,scale=#2]{figures/#1-crop.pdf}}

\end{minipage}
\medskip

}


% \newcommand{\insfig}[2]{\begin{figure}[htbp] \centering \includegraphics[scale=#2]{figures/#1-crop.pdf} \label{fig:#1} \end{figure}}
% syntax: \insfig{name}{0.5}{caption}

\newcommand{\fixme}[1]{{\color{orange}{[#1]}}}
\newcommand{\currentposition}{{\color{blue} \noindent\makebox[\linewidth]{\hdashrule{\paperwidth}{1pt}{3mm}}}}

% \mathtoolsset{showonlyrefs}

\bibliography{higgs-metric}

\begin{document}

\pagestyle{fancy}
\lhead{{\tiny \color{gray} \tt \gitAuthorIsoDate}}
\chead{\tiny \ti{Metric on moduli of Higgs Bundles, \tb{preliminary} and \tb{incomplete} draft}}
\rhead{{\tiny \color{gray} \tt \gitAbbrevHash}}
\renewcommand{\headrulewidth}{0.5pt}


\begin{center}
\tb{Metric on moduli of Higgs Bundles} \\
Andrew Neitzke \\
\tb{Preliminary} and \tb{incomplete} draft
\end{center}

{These are the notes for a lecture series on moduli of Higgs bundles.
The latest version can be found at
\begin{center}
\small \url{http://ma.utexas.edu/users/neitzke/expos/higgs-metric.pdf}
\end{center}
% Please send corrections/improvements to
% \begin{center}
% \small \tt\href{mailto:neitzke@math.utexas.edu}{neitzke@math.utexas.edu}
% \end{center}
% or as pull requests to the source repository hosted at
% \begin{center}
% \small \url{http://github.com/neitzke/higgs-metric}
% \end{center}
}

% \tableofcontents
% \renewcommand{\listtheoremname}{Quick reference}
% \listoftheorems[onlynamed]

% \newpage


\section{Lecture 1}


\subsection{Overview}

The aim of these lectures is to describe a \ti{conjectural} 
approach to 
``more explicitly'' understanding the \hk metric $g$ on 
the moduli space $\cM$ of Higgs bundles.

The basic structure we are aiming for is as follows.
$\cM$ is a complex integrable system: this means that
it admits a holomorphic fibration $\pi: \cM \to \cB$
with complex Lagrangian fibers.
There is a complex codimension $1$ 
``singular locus'' $\cB_\sing \subset \cB$.
Let $\cB_\reg = \cB \setminus \cB_\sing$.
Over $\cB_\reg$, the fibers of $\pi$ are compact
complex tori, roughly the Jacobians of a
family of smooth \ti{spectral curves} $\Sigma_\vphi \subset T^* C$
parameterized by $\vphi \in \cB_\reg$.

The picture is that the \hk metric $g$ on $\cM$ is constructed
from two constituents:
\begin{itemize}
  \item The special \kahler structure on $\cB_\reg$, constructed from \ti{periods} of the spectral curves $\Sigma_\vphi$ ($\vphi \in \cB_\reg$),
  \item A collection of integer ``Donaldson-Thomas invariants,''
  which (in a tropical sense) count special Lagrangian discs
  in $T^*C$ with boundary on $\Sigma_\vphi$.
\end{itemize}

If one neglects the Donaldson-Thomas invariants one obtains
a simple and explicit \hk metric $g^\sf$ on $\cB_\reg$, so called
because it is flat (and translation invariant) on the torus
fibers. $g^\sf$ however does not extend to the full $\cB$.

The effect of the Donaldson-Thomas invariants
is to add corrections which break the translation invariance.
Away from $\cB_\sing$, these corrections are of the order 
$\e^{-M}$ where $M$ is the area of the smallest 
special Lagrangian disc, i.e. we predict $g = g^\sf + O(\e^{-M})$.
In particular, if we follow some path to infinity in $\cM$
along which $M \to \infty$, we expect to see $g$
converging to $g^\sf$.
On the other hand, as we approach $\cB_\sing$ the effect
of these corrections is large: it smooths out the singularity
of $g^\sf$.

\subsection{Data}

Throughout these lectures we will fix data $(G,C,\vec m)$ as follows:
\begin{itemize}
  \item a group $G = \SU(K)$ or $\U(K)$, with diagonal subgroup $T \subset G$,
  \item a compact Riemann surface $C$, equipped with a finite subset $P \subset C$,
  \item a vector $\vec{m}_p = (m^\C_p, m^\R_p) \in \C^K \oplus (\R / 2 \pi \Z)^K$ for each $p \in P$.
\end{itemize}
We write $\Tr$ for the sum of the entries of a $K$-vector.
If $G = \SU(K)$ then we require
$\Tr m_p^\C = 0$ and $\Tr m_p^\R = 0$.
If $G = \U(K)$ we require instead 
$\sum_{p \in P} \Tr m_p^\C = 0$,
$\sum_{p \in P} \Tr m_p^\R = 0$.

We require that $2g_C + \abs{P} - 2 > 0$; equivalently, 
if $C$ has genus $0$ we require $\abs{P} \ge 3$, 
and if $C$ has genus $1$ we require $\abs{P} \ge 1$.
\insfig{higgs-metric-1}{0.8}

\begin{defn}[Generic puncture data]
We say $\vec{m}$ is \ti{generic} if all $m^\C_p$
have all entries distinct. 
The generic case is the simplest
case, and for the main purposes of these lectures,
it is fine to restrict to the generic case throughout.
\end{defn}

\begin{example}[The case of $G = \SU(2)$]
A good case to keep in mind is the case $G = \SU(2)$. In that case our data reduces to a Riemann surface $C$, a finite subset $P \subset C$,
and numbers $m^\C_p \in \C$, $m^\R_p \in \R$ for each $p \in P$. The generic case is the case when all $m^\C_p \neq 0$.
\end{example}

\begin{remark} The outputs of all our constructions will 
be invariant under the symmetric group $S_K$ acting on $\vec m_p$.
\end{remark}

% \fixme{remark on irregular singularities?}

\subsection{Moduli of Higgs bundles}

Usually one would start out with ordinary Higgs bundles,
but with an eye to what will come later, we go straight
to the parabolic case.

\begin{defn}[Parabolic Higgs bundles for $G = \U(K)$]
When $G = \U(K)$, a $(G, C, \vec m)$-\ti{Higgs bundle} is a pair $(E, \varphi)$, where:
\begin{itemize}
  \item $E$ is a holomorphic vector bundle of rank $K$ over $C$,
  % (reduction
  % to the parabolic subgroup whose Levi subgroup is the 
  % normalizer of $m_p^\R$),
  % parabolic weights given by $m_p^\R$ and total parabolic degree zero,
  \item $\varphi$ is a holomorphic section of $\End E \otimes K_C(P)$,
  % compatible with the parabolic structure at each $p \in P$, 
  % with generalized eigenvalues of the residue given by $m_p^\C$.
\end{itemize}
with additional ``parabolic structure'' at the points $p \in P$
as follows. Each $E_p$ carries a decreasing filtration with weights in $[0,2\pi)$, where 
\begin{equation}
  \dim \Gr_\alpha E_p = \text{multiplicity of $\alpha$ in $m^\R$}.
\end{equation}
The residue $\Res_p \varphi$
preserves the filtration on $E_p$ and thus descends to
act on the graded pieces $\Gr_\alpha E_p$, with generalized
eigenvalues determined by $m^\C$. Altogether then,
\begin{equation}
 \Gr E_p = \bigoplus_{\vec{\lambda}} E_{p,\vec\lambda}
\end{equation}
where $E_{p,\vec\lambda}$ is in grade $\lambda^\R$, and 
$\Res_p \varphi$ acts on $E_{p,\vec\lambda}$
with generalized eigenvalue $\lambda^\C$.
\end{defn}

Relative to a local holomorphic trivialization of $E$
and local coordinate on $C$, $\varphi$ would
be written as a matrix of holomorphic $1$-forms: e.g. for $G = \SU(2)$,
\begin{equation}
  \varphi = \begin{pmatrix} f_1 & f_2 \\ f_3 & -f_1 \end{pmatrix} \de z,
\end{equation}
where all $f_i$ are holomorphic functions of $z$. 

\begin{remark}[Parabolic structure in case of generic puncture data]
The case of generic puncture data is simpler:
then $E_p = \bigoplus_{\vec\lambda} E_{p,\vec\lambda}$
with all $\vec\lambda$ one-dimensional, $\Res_p \varphi$ 
acting by $\lambda^\C$, and filtration weight given by $\lambda^\R$.
\end{remark}

\begin{remark}[Motivation of the filtration]
One can think of the filtration as a sort of modification
of the structure of the bundle $E$ to allow fractional
orders of vanishing: given a section
$s$ of $E$, if $s(p)$ is in the weight $\alpha$ piece of $E_p$,
then we say that $s(p)$  ``vanishes to order $\frac{\alpha}{2\pi}$ at $p$''. This explains in particular why we have the strange
restriction that the weights lie in $[0,2\pi)$: changing the order
of vanishing by an integer can be accomplished as usual by multiplying sections by $z^n$.
\end{remark}

\begin{defn}[Parabolic Higgs bundles for $G = \SU(K)$]
When $G = \SU(K)$, we impose the additional condition that
$\det E$ is trivial \fixme{in the parabolic sense...} and 
$\Tr \varphi = 0$.
\end{defn}

\begin{defn}[Parabolic degree]
Let $E$ be a $(G, C, \vec m)$-Higgs bundle,
and $E' \subset E$ any holomorphic subbundle preserved by
$\varphi$. Then $E'_p$ also get a filtration with
weights in $[0,2\pi)$, and we define
\begin{equation}
  \pdeg E' = \deg E' + \frac{1}{2\pi} \sum_p \sum_{\mu \in [0,2\pi)} \mu \dim \Gr^\mu E'_p.
\end{equation}
\end{defn}

Thus, for example, with generic puncture data and $G = \SU(2)$,
the two weights which occur in the decomposition of 
$\Gr E_p$ are of the form
$(\alpha, 2\pi-\alpha)$, for some $\alpha \le \pi$.
If $E'_p \subset E_p$ is a generic line, then the contribution
to $\pdeg E'$ from $p$ will be $\frac{\alpha}{2\pi}$; if $E'_p$
is the line $E_{p,\vec\lambda}$ with $\lambda^\R = \alpha$, 
then the contribution will be $1 - \frac{\alpha}{2\pi}$. 

\begin{remark}Our conditions on $m^\R$ imply that $\pdeg E \in \Z$.
\end{remark}

\begin{defn}[Parabolic stability]
We say $E$ is \ti{stable} if for all $E' \subset E$ preserved
by $\varphi$ we have
\begin{equation}
  \frac{\pdeg E'}{\rank E'} < \frac{\pdeg E}{\rank E}.
\end{equation}
We say $E$ is \ti{polystable} if it is a direct sum of
stable Higgs bundles with the same $\frac{\pdeg}{\rank}$.
\end{defn}

\begin{prop}[Moduli space of Higgs bundles exists]
There is a moduli space $\cM = \cM(G,C,\vec{m})$ parameterizing
polystable Higgs bundles $(E,\varphi)$, with $\pdeg E = 0$, 
up to equivalence. 
$\cM$ is a complex manifold away
from the locus of strictly polystable Higgs bundles.
It carries a natural holomorphic symplectic form $\Omega_1$.
\end{prop}


The holomorphic symplectic form 
$\Omega_1$ comes from the fact that variations of the
holomorphic bundle $E$ are valued in $\Omega^{0,1}(\End E)$,
while variations of the Higgs field $\varphi$ are
valued in $\Omega^{1,0}(\End E)$,
and the two are naturally dual. \fixme{with some care
around punctures}


\begin{remark}[Dimension of $\cM$]
Its complex dimension is
\begin{equation} \label{eq:dim-M}
  \dim_\C \cM = \begin{cases} (2g_C-2) K^2 + 2 + \abs{P} K(K-1), & \quad G = \U(K), \\ (2g_C-2) (K^2-1) + \abs{P} K(K-1), & \quad G = \SU(K). \end{cases}
\end{equation}
\end{remark}


\begin{example}[The abelian case]
$G = \U(1)$ is the abelian case, in which $\dim_\C \cM = 2g_C$ irrespective
of $\abs{P}$. When $P = \emptyset$ we have simply $\cM = T^* \Jac C$, the cotangent
bundle to a compact complex torus. When $P \neq \emptyset$, $\cM$ is a torsor
over $T^* \Jac C$.
\end{example}

\begin{example}[Some low-dimensional nonabelian cases] Here are a few examples:
\begin{itemize}
\item If $G = \SU(2)$ and $C$ is a genus $0$ curve with $\abs{P} = 4$,
then $\dim_\C \cM = 2$.
\item If $G = \SU(3)$
and $C$ is a genus $0$ curve with $\abs{P}=3$,
then again $\dim_\C \cM = 2$.
\item If we want to take $P = \emptyset$,
then the simplest nonabelian case is
$G = \SU(2)$ and $C$ a genus $2$ curve, in which case
$\dim_\C \cM = 6$. 
\end{itemize}
\end{example}

\begin{remark}[Restriction of Jordan form]
When some $\vec\lambda$ occurs with multiplicity
greater than $1$ in $\vec{m}_p$, there 
is a natural way of getting a subspace of $\cM$:
we can restrict the Jordan block structure of
the unipotent endomorphism $\Res_p \varphi$
acting in each $E_{p,\vec\lambda}$ (e.g. if $\vec\lambda$ has
multiplicity $2$ we can require that $\Res_p \varphi$ acts
by the scalar $\lambda^\C$ in $E_{p,\vec\lambda}$ instead of
a nontrivial Jordan block). This subspace can be considered
as a moduli space of Higgs bundles in its own right, which
has all the structure we will discuss
in the rest of these lectures; 
in particular we can get
more $2$-dimensional examples in this way.
\end{remark}


\subsection{The Hitchin map}

Now we want to exhibit $\cM$ as a complex integrable system,
i.e. a holomorphic Lagrangian fibration.

Given a Higgs bundle $(E,\varphi) \in \cM$ we can consider
the eigenvalues of $\varphi(z)$: as $z \in C$ varies
these sweep out a curve in $\Tot[K_C(P)]$, a $K$-fold cover of $C$:
\begin{equation}
  \Sigma = \{ \lambda: \det(\lambda - \varphi) = 0\} \subset \Tot[K_C(P)].
\end{equation}
The curve $\Sigma$ is an invariant of the Higgs 
bundle $(E,\varphi)$, which we call
the \ti{spectral curve}. 
The projection to $C$ induces $\rho: \Sigma \to C$ which is a $K$-fold branched covering.

Now what are all the curves $\Sigma$
we can get in this way?
We can describe them by their coefficients, ie write
\begin{equation} \label{eq:spectral-coeffs}
  \det(\lambda - \varphi) = \lambda^K + \sum_{n=1}^K \lambda^{K-n} \phi_n = 0, \qquad \phi_n \in K_C(P)^n.
\end{equation}
Then we can write $\Sigma = \Sigma_{\vphi}$ where
$\vphi = (\phi_1, \dots, \phi_n)$.
The coefficients $\vphi$ lie in the Hitchin base:
\begin{defn}[Hitchin base]
If $G = \U(K)$,
the \ti{Hitchin base} $\cB = \cB(G,C,m^\C)$ is
the space of tuples $\vphi = (\phi_1, \phi_2, \dots, \phi_K)$
where $\phi_n$ is a holomorphic section of $K_C(P)^n$,
and $m_p^\C$ controls the residues $\phi_n(p)$ via the equation\footnote{Recall that for a section of $K_C^n$ the residue is the coefficient of $\frac{(\de z)^n}{z^n}$: this is an invariantly
defined complex number. This generalizes the familiar situation of a holomorphic $1$-form
where the residue is the coefficient of $\frac{\de z}{z}$. Said otherwise, the fiber of
$K_C(P)$ over $p \in P$ is canonically trivial.}
\begin{equation}
  \det (\lambda - m_p^\C) = \lambda^K + \sum_{n=1}^K \lambda^{K-n} \phi_n(p).
\end{equation}
If $G = \SU(K)$ then we make the same definition except that
$\phi_1 = 0$ everywhere.
$\cB$ is a complex affine space, a torsor for the complex vector space
of $\vphi$ vanishing at $P$.
% \begin{equation}
%   \cB_0 = \begin{cases} \bigoplus_{n=1}^K H^0\left(C, K_C^n((n-1)P)\right), & G = \U(K), \\
%   \bigoplus_{n=2}^K H^0\left(C, K_C^n((n-1)P)\right), & G = \SU(K).
%   \end{cases}
% \end{equation}

\begin{defn}[Hitchin map]
The \ti{Hitchin map} is the map $\pi: \cM \to \cB$ given by
\begin{equation}
  (E, \varphi) \mapsto (\phi_1, \dots, \phi_K)
\end{equation}
where the $\phi_n$ are defined by \eqref{eq:spectral-coeffs}.
\end{defn}

\begin{prop}[Hitchin map has Lagrangian fibers] The fibers of $\pi$ are complex Lagrangian
subspaces of $(\cM, \Omega_1)$. (In particular, $\dim_\C \cB = \half \dim_\C \cM$.)
\end{prop}

\fixme{say why?}

We can say more precisely what the fibers are, at least 
over most of the Hitchin base:

\begin{defn}[Singular locus and smooth locus]
The \ti{singular locus} $\cB_\sing \subset \cB$ is the set of $\vphi \in \cB$
for which $\Sigma_{\vec \phi}$ is singular. $\cB_\sing$ has complex codimension $1$ in $\cB$.
The \ti{smooth locus} is $\cB_\reg = \cB - \cB_\sing$.
We also let $\cM_\reg = \pi^{-1}(\cB_\reg)$.
\end{defn}

\begin{prop}[Fibers of the Hitchin map over $\cB_\reg$, crude version]
Suppose $\vphi \in \cB_\reg$. Let $\cM_\vphi = \pi^{-1}(\vphi)$.
Then:
\begin{itemize}
  \item If $G = \U(K)$, then $\cM_\vphi$ is a torsor over
$\Jac \Sigma_\vphi$.
 \item If $G = \SU(K)$, then $\cM_\vphi$ is a torsor over
$\Prym \Sigma_\vphi$.
\end{itemize}
\end{prop}
A more precise description would say exactly \ti{which} torsor 
$\cM_\vphi$ is. For example, when $G = \U(K)$ and $P = \emptyset$, we get
$\cM_\vphi = \Pic^{d} \Sigma_\vphi$ with $d = -K(K-1)(g_C-1)$.

When $\vphi \in \cB_\sing$, $\cM_\vphi$ is compact,
but generally singular.

\begin{remark}[Concrete description of the singular locus]
What is $\cB_\sing$ concretely?
The branch locus of the covering $\rho: \Sigma_\vphi \to C$ 
is the zero locus of the discriminant $\Delta_{\vphi}$ of the equation \eqref{eq:spectral-curve}. $\Delta_\vphi$ 
is a holomorphic section of $K_C(P)^{K(K-1)}$;
e.g. for $G = \SU(2)$,
$\Delta_{\vphi} = - 4 \phi_2$.
$\vphi \in \cB_\reg$ iff $\Delta_\vphi$ has only simple zeroes; in this case
it has $K(K-1)(2g_C+\abs{P}-2)$ of them, and the genus of $\Sigma_\vphi$ is
  $g_\Sigma = 1 + K^2(g_C - 1) + \half K(K-1) \abs{P}$.
\end{remark}

\begin{example}[Hitchin base and spectral curves for $G = \SU(2)$]
When $G = \SU(2)$, $\cB$ is the space of meromorphic quadratic
differentials $\phi_2$ on $C$, with a pole of order $\le 2$ at 
each $p \in P$, of residue $\Res_p \phi_2 = (m_p^\C)^2$.
% It is a torsor over the space $\cB_0$ of meromorphic quadratic differentials
% with pole order $\le 1$ at each $p \in P$. 
It has complex dimension
$\dim_\C \cB = 3 g_C - 3 + \abs{P}$. 
The spectral curve for a given $\phi_2 \in \cB$
is
\begin{equation}
  \Sigma_{\phi_2} = \{\lambda: \lambda^2 + \phi_2 = 0\} \subset \Tot[K_C(P)].
\end{equation}
$\Sigma_{\phi_2}$ is a $2$-fold branched covering of $C$, branched at the zeroes of $\phi_2$.
The regular locus $\cB_\reg \subset \cB$ consists of those $\phi_2$ which have only simple zeroes ($4 g_C + 2\abs{P} - 4$ of them).
\end{example}
\end{defn}


\begin{example}[A one-dimensional Hitchin base]
Suppose $G = \SU(2)$, $\abs{P} = 4$, $g_C = 0$.
If $m^\C = 0$, $\cB$ is a complex vector space of dimension $1$,
and $\cB_\sing \subset \cB$ is the origin.
If $m^\C \neq 0$, $\cB$ is a complex affine space of dimension $1$.
For generic $m^\C$, $\cB_\sing \subset \cB$ consists
of $6$ points. The fiber $\cM_\vphi$ over any $\vphi \in \cB_\sing$ is
a nodal torus.
\end{example}

\insfig{higgs-metric-2}{0.85}

We should emphasize that this one-dimensional example can lead to the
wrong mental picture about the generic case: generally,
when $m^\C = 0$, $\cB_\sing$ is some codimension-$1$ cone inside $\cB$, and in particular,
when $\dim \cB > 1$, $\cB_\sing$ is not compact. For $m^\C \neq 0$, $\cB_\sing \subset \cB$
is not a cone anymore, but near asymptotic infinity of $\cB$,
it still looks asymptotically like a cone.



\subsection{The \hk metric}

A key fact about $\cM$ is that it carries a canonically
defined \hk metric $g$. However, $g$ is not easily
written in closed form.

To construct $g$, one needs to consider \ti{Hitchin's equation}:
given a Higgs bundle $(E,\varphi)$ this is a PDE
for a Hermitian metric $h$ in $E$, written
\begin{equation} \label{eq:hitchin-equation}
  F_{D_h} + [\varphi, \varphi^{\dagger_h}] = 0.
\end{equation}
Here $D_h$ denotes the Chern connection in $(E,h)$,
the unique $h$-unitary connection compatible with
the holomorphic structure of $E$.
\fixme{write local coordinates?}
One considers \eqref{eq:hitchin-equation} for
metrics $h$ which are smooth on $C - P$ and
have a prescribed singular behavior near each
$p \in P$, as follows:
\begin{defn}[Adapted metrics for generic puncture data] 
In the case of generic puncture data, a Hermitian metric $h$
in $E$ is \ti{adapted} if, for a holomorphic section $s$ 
where $s(p) \in E_p$ has grade $\alpha$, we have
$h(s,s) \sim \abs{z}^{2 \alpha}$ near $p$.
\end{defn}
\fixme{in general need logs determined by the Jordan
block structure of $\varphi$}

A basic fact is: \fixme{refs: Simpson}
\begin{thm}[Existence of solutions to Hitchin equation] \label{thm:hitchin-existence}
The equation \eqref{eq:hitchin-equation} has an
adapted solution $h$ for each $(E,\varphi)$;
this $h$ is unique up to scalar multiple.
\end{thm}
We call the solution the \ti{harmonic metric}.

Using \autoref{thm:hitchin-existence}
one can define Hitchin's metric on $\cM$, as follows.
Given a tangent vector $v$ to $\cM$ whose norm we wish to calculate, we represent $v$ by a family of Higgs bundles
$(E_t,\varphi_t)$, with harmonic metrics $h_t$.
Identifying the underlying Hermitian bundles with a single $(E,h)$
we have an arc of unitary connections $D_t$ and skew-Hermitian 
Higgs fields $\Phi_t = \varphi_t - \varphi_t^\dagger$ 
on $(E,h)$, determined up to gauge transformations i.e. 
automorphisms of $(E,h)$.
In particular, differentiating at $t = 0$ gives a pair
\begin{equation}
(\dot A, \dot \Phi) \in \Omega^1(\fu(E)) \oplus \I \Omega^{1}(\fu(E))
\end{equation}
defined up to gauge transformations.
Then the norm of $v$ is the $L^2$ norm
\begin{equation}
  g(v,v) = \int_C \norm{\dot A}^2 + \norm{\dot \Phi}^2
\end{equation}
where for $(\dot A, \dot \Phi)$ we choose the representative
\ti{minimizing} the $L^2$ norm.


% \subsection{Hyperkahler structure}

% Although it is not obvious from the way I have described it
% here, the metric $g$ on $\cM$ is in fact \hk.
% In particular, it carries symplectic structures 
% $\omega_1$, $\omega_2$, $\omega_3$:
% \fixme{review the basic structure}
% \fixme{check signs}
% \begin{subequations} \label{eq:symplectic-forms-higgs}
% \begin{align}
%   \omega_1((\dot A_1, \dot \Phi_1),(\dot A_2, \dot \Phi_2)) &= \int_C \Tr(- \dot A_1 \wedge \dot A_2 + \dot \Phi_1 \wedge \dot \Phi_2), \\
%   \omega_2((\dot A_1, \dot \Phi_1),(\dot A_2, \dot \Phi_2)) &= \int_C \Tr(\dot \Phi_1 \wedge \star \dot A_2 - \dot A_1 \wedge \star \dot \Phi_2), \\
%   \omega_3((\dot A_1, \dot \Phi_1),(\dot A_2, \dot \Phi_2)) &= \int_C \Tr(\dot\Phi_1 \wedge \dot A_2 + \dot A_1 \wedge \dot \Phi_2).
% \end{align}
% \end{subequations}
% and complex structures
% $I_1$, $I_2$, $I_3$:
% \begin{subequations}
% \begin{align}
%  I_1(\dot A, \dot \Phi) &= (\star \dot A, - \star \dot \Phi), \\
%  I_2(\dot A, \dot \Phi) &= (- \dot \Phi, \dot A), \\
%  I_3(\dot A, \dot \Phi) &= (- \star \dot\Phi, - \star \dot A).
% \end{align}
% \end{subequations}




\fixme{remark on hyperkahler quotient}




% In particular, $\cM$ is noncompact.

\subsection{The special \kahler structure}

The regular part of the Hitchin base $\cB_\reg$ 
carries a (rigid) special \kahler structure, as follows.

\begin{defn}[Charge lattices for $G = \U(K)$]
Suppose $G = \U(K)$ and $\vphi \in \cB_\reg$. 
Then define:
\begin{itemize}
 \item $\Gamma^\flavor = \bigoplus_{p \in P} \Gamma^{\flavor,p}$ where $\Gamma^{\flavor,p}$
 is the weight lattice of the centralizer of $m^\C_p$,
 \item $\Gamma_\vphi^\gauge = H_1(\Sigma_\vphi, \Z)$,
 % \item $\Gamma_\vphi = H_1(\Sigma_\vphi - \rho^{-1}(P), \Z)$,
 \item $\Gamma_\vphi = \left( \Gamma^\flavor \oplus H_1(\Sigma'_\vphi,\Z) \right) / \sim$
\end{itemize}
where $\Sigma'_\vphi = \Sigma_\vphi - \pi^{-1}(P)$,
and the relation $\sim$ is as follows. A point of $\pi^{-1}(p)$ with ramification index $\nu$ corresponds to a factor $\U(\nu)$ in the centralizer of $m_p^\C$. We identify a clockwise 
loop around this point with the weight of the 
determinant representation of this $\U(\nu)$ factor.
\end{defn}

\begin{example}[Charge lattices for generic puncture data]
When the puncture data is generic, we can say all this
more simply:
\begin{itemize}
 \item $\Gamma^\flavor$ is the free $\Z$-module generated
by loops around the points of $\pi^{-1}(P)$,
 \item $\Gamma_\vphi^\gauge = H_1(\Sigma_\vphi, \Z)$,
 \item $\Gamma_\vphi = H_1(\Sigma'_\vphi, \Z)$.
\end{itemize}
\end{example}

In any case, these lattices assemble into an exact 
sequence of local systems of lattices over $\cB_\reg$,
\begin{equation} \label{eq:lattice-extension}
0 \to \Gamma^\flavor \to \Gamma \to \Gamma^\gauge \to 0
\end{equation}
$\Gamma^\gauge$ also has a nondegenerate skew pairing,
coming from the intersection pairing on $H_1(\Sigma_\vphi, \Z)$.


\begin{defn}[Period map]
Let $\lambda$ denote the meromorphic $1$-form on $\Tot[K_C(P)]$,
induced by the tautological (Liouville) holomorphic $1$-form
on $\Tot[K_C]$.
$\lambda$ has poles along $\rho^{-1}(P)$.
The \ti{period map} is the map
\begin{equation}
   Z_\vphi: \Gamma_\vphi \to \C, \qquad Z_\vphi(\gamma) = \oint_\gamma \lambda
\end{equation}
which we could also view as an element $Z \in \Gamma^*_\C$.
\end{defn}
The restriction of $Z_\vphi$ to the image of $\Gamma^\flavor$ is constant. 
It follows that the derivative $\de Z: \Gamma \to T^* \cB_\reg$ descends to
$\de Z: \Gamma^\gauge \to T^* \cB_\reg$,
which we can also view as
\begin{equation}
  \de Z \in T^* \cB_\reg \otimes (\Gamma_\C^\gauge)^*
\end{equation}
% Note moreover the dimensional ``coincidence'' that
% $\rank \Gamma^\gauge = 2 \dim_\C \cB_{\reg}$.
Let $\IP{,}$ denote the intersection pairing on $\Gamma_\C^\gauge$
and $\DIP{,}$ its inverse on $(\Gamma^*)^\gauge_\C$.
Then we can define a $2$-form
 $\DIP{\de Z,  \de Z} \in \Omega^{2,0}(\cB_\reg)$.

\begin{prop}[Lagrangian property] We have
\begin{equation}  \label{eq:lagrangian-property}
\DIP{\de Z, \de Z} = 0.
\end{equation}
\end{prop}

(Note that this property is automatic in case
$\dim_\C \cB = 1$, but not otherwise.)

Next we define a 2-form on $\cB$ by
\begin{equation}
  \omega = \DIP{\de Z, \de \overline{Z}}
\end{equation}
(or relative to a basis of $\Gamma^\gauge$ with 
$\IP{A^I, B_J} = \delta^I_J$, 
$\omega = \sum_{I = 1}^{n} \de Z(A^I) \wedge \de \overline{Z}(B_I)$)

\begin{prop}[Positivity of $\omega$] $\omega$ is a
positive $(1,1)$-form on $\cB_\reg$ (and thus it defines
a \kahler metric on $\cB_\reg$).
\end{prop}

From the existence of $Z$ obeying \eqref{eq:lagrangian-property}
one can deduce all the structure
of special \kahler manifold on $\cB_\reg$. In particular,
for any choice of local vectors $\gamma_1, \dots, \gamma_r$
spanning a maximal isotropic sublattice of $\Gamma$, the functions
$Z_{\gamma_1}, \dots, Z_{\gamma_r}$ give a local coordinate
system.
%  The transition maps between these local coordinate
% systems are valued in $\Sp(2r,\Z) \ltimes \C^r$.



\subsection{The semiflat metric}

\begin{defn}[Semiflat metric]
The \ti{semiflat metric} on $\cM_\reg$ \fixme{...}
\end{defn}


\section{Lecture 2}

\subsection{Donaldson-Thomas invariants}


\printbibliography

\end{document}
