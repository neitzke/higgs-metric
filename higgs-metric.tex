\documentclass[12pt,letterpaper,reqno]{article}

% \usepackage{mathtools}
\usepackage{epsfig}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{indentfirst}
\usepackage{xspace}
\usepackage{multirow}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{verbatim}
\usepackage[letterpaper,margin=1in,headheight=15pt]{geometry}
\usepackage{mathpazo}
\usepackage{tikz-cd}
\usepackage{booktabs}
\usepackage{framed}
\usepackage{float}
\usepackage{thmtools}
\usepackage{dashrule}
\usepackage[missing=]{gitinfo2}
\usepackage{fancyhdr}

\definecolor{darkblue}{rgb}{0.1,0.1,0.7}
\definecolor{darkred}{rgb}{0.5,0.1,0.1}
\definecolor{darkgreen}{rgb}{0.0,0.42,0.06}
\hypersetup{colorlinks=true,urlcolor=darkred,linkcolor=darkblue,citecolor=darkred}
\definecolor{shadecolor}{rgb}{0.85,0.85,0.85}

% Bibliography formatting
\usepackage[bibstyle=authoryear-comp,labeldate=false,defernumbers=true,maxnames=20,uniquename=init,dashed=false,backend=biber,sorting=none]{biblatex}

\DeclareNameAlias{sortname}{first-last}

\DeclareFieldFormat{url}{\url{#1}}
\DeclareFieldFormat[article]{pages}{#1}
\DeclareFieldFormat[inproceedings]{pages}{\lowercase{pp.}#1}
\DeclareFieldFormat[incollection]{pages}{\lowercase{pp.}#1}
\DeclareFieldFormat[article]{volume}{\textbf{#1}}
\DeclareFieldFormat[article]{number}{(#1)}
\DeclareFieldFormat[article]{title}{\MakeCapital{#1}}
\DeclareFieldFormat[inproceedings]{title}{#1}
\DeclareFieldFormat{shorthandwidth}{#1}

% Don't use "In:" in bibliography. Omit urls from journal articles.
\DeclareBibliographyDriver{article}{%
  \usebibmacro{bibindex}%
  \usebibmacro{begentry}%
  \usebibmacro{author/editor}%
  \setunit{\labelnamepunct}\newblock
  \MakeSentenceCase{\usebibmacro{title}}%
  \newunit
  \printlist{language}%
  \newunit\newblock
  \usebibmacro{byauthor}%
  \newunit\newblock
  \usebibmacro{byeditor+others}%
  \newunit\newblock
  \printfield{version}%
  \newunit\newblock
%  \usebibmacro{in:}%
  \usebibmacro{journal+issuetitle}%
  \newunit\newblock
  \printfield{note}%
  \setunit{\bibpagespunct}%
  \printfield{pages}
  \newunit\newblock
  \usebibmacro{eprint}
  \newunit\newblock
  \printfield{addendum}%
  \newunit\newblock
  \usebibmacro{pageref}%
  \usebibmacro{finentry}}

% Remove dot between volume and number in journal articles.
\renewbibmacro*{journal+issuetitle}{%
  \usebibmacro{journal}%
  \setunit*{\addspace}%
  \iffieldundef{series}
    {}
    {\newunit
     \printfield{series}%
     \setunit{\addspace}}%
  \printfield{volume}%
%  \setunit*{\adddot}%
  \printfield{number}%
  \setunit{\addcomma\space}%
  \printfield{eid}%
  \setunit{\addspace}%
  \usebibmacro{issue+date}%
  \newunit\newblock
  \usebibmacro{issue}%
  \newunit}


% Bibliography categories
\def\makebibcategory#1#2{\DeclareBibliographyCategory{#1}\defbibheading{#1}{\section*{#2}}}
\makebibcategory{books}{Books}
\makebibcategory{papers}{Refereed research papers}
\makebibcategory{chapters}{Book chapters}
\makebibcategory{conferences}{Papers in conference proceedings}
\makebibcategory{techreports}{Unpublished working papers}
\makebibcategory{bookreviews}{Book reviews}
\makebibcategory{editorials}{Editorials}
\makebibcategory{phd}{PhD thesis}
\makebibcategory{subpapers}{Submitted papers}
\makebibcategory{curpapers}{Current projects}

\setlength{\bibitemsep}{2.65pt}
\setlength{\bibhang}{.8cm}
\renewcommand{\bibfont}{\small}

\renewcommand*{\bibitem}{\addtocounter{papers}{1}\item \mbox{}\hskip-0.85cm\hbox to 0.85cm{\hfill\arabic{papers}.~~}}
\defbibenvironment{bibliography}
{\list{}
  {\setlength{\leftmargin}{\bibhang}%
   \setlength{\itemsep}{\bibitemsep}%
   \setlength{\parsep}{\bibparsep}}}
{\endlist}
{\bibitem}

\newenvironment{publications}{\section{\LARGE Publications}\label{papersstart}\vspace*{0.2cm}\small
\titlespacing{\section}{0pt}{1.5ex}{1ex}\itemsep=0.00cm
}{\label{papersend}\addtocounter{sumpapers}{-1}\refstepcounter{sumpapers}\label{sumpapers}}

\def\printbib#1{\printbibliography[category=#1,heading=#1]\lastref{sumpapers}}

% Counters for keeping track of papers
\newcounter{papers}\setcounter{papers}{0}
\newcounter{sumpapers}\setcounter{sumpapers}{0}
\def\lastref#1{\addtocounter{#1}{\value{papers}}\setcounter{papers}{0}}

% theorem environments
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,notefont=\normalfont\bfseries, notebraces={(}{)}]{theorem}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont,notefont=\normalfont\bfseries, notebraces={(}{)}]{noital}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont\color{darkgreen},notefont=\normalfont\bfseries, notebraces={(}{)}]{green}
\declaretheoremstyle[spaceabove=0.25cm,spacebelow=0.25cm,bodyfont=\normalfont,notefont=\normalfont\bfseries,qed=$\qedsymbol$,notebraces={(}{)}]{proofstyle}

\declaretheorem[name=Theorem,numberwithin=section,style=theorem]{thm}
\declaretheorem[name=Proposition,sibling=thm,style=theorem]{prop}
\declaretheorem[name=Conjecture,sibling=thm,style=theorem]{conj}
\declaretheorem[name=Corollary,sibling=thm,style=theorem]{cor}
\declaretheorem[name=Lemma,sibling=thm,style=theorem]{lem}
\declaretheorem[name=Remark,sibling=thm,style=theorem]{remark}
\declaretheorem[name=Definition,sibling=thm,style=noital]{defn}
\declaretheorem[name=Example,sibling=thm,style=noital]{example}
\declaretheorem[name=Exercise,numberwithin=section,style=green]{exercise}
\declaretheorem[name=Proof,style=proofstyle,numbered=no]{pf}

\numberwithin{equation}{section}


% macros for convenience
\newcommand{\tops}{\texorpdfstring}

\newcommand{\nid}{\noindent}

\newcommand{\fa}{{\mathfrak a}}
\newcommand{\fp}{{\mathfrak p}}
\newcommand{\fk}{{\mathfrak k}}
\newcommand{\fg}{{\mathfrak g}}
\newcommand{\ft}{{\mathfrak t}}
\newcommand{\fh}{{\mathfrak h}}
\newcommand{\fn}{{\mathfrak n}}
\newcommand{\fq}{{\mathfrak q}}
\newcommand{\fm}{{\mathfrak m}}
\newcommand{\fr}{{\mathfrak r}}
\newcommand{\fu}{{\mathfrak u}}
\newcommand{\fG}{{\mathfrak G}}

\newcommand{\cC}{\ensuremath{\mathcal C}}
\newcommand{\cG}{\ensuremath{\mathcal G}}
\newcommand{\cB}{\ensuremath{\mathcal B}}
\newcommand{\cL}{\ensuremath{\mathcal L}}
\newcommand{\cS}{\ensuremath{\mathcal S}}
\newcommand{\cF}{\ensuremath{\mathcal F}}
\newcommand{\cK}{\ensuremath{\mathcal K}}
\newcommand{\cZ}{\ensuremath{\mathcal Z}}
\newcommand{\cM}{\ensuremath{\mathcal M}}
\newcommand{\cN}{\ensuremath{\mathcal N}}
\newcommand{\cO}{\ensuremath{\mathcal O}}
\newcommand{\cH}{\ensuremath{\mathcal H}}
\newcommand{\cX}{\ensuremath{\mathcal X}}
\newcommand{\cY}{\ensuremath{\mathcal Y}}
\newcommand{\cA}{\ensuremath{\mathcal A}}
\newcommand{\cI}{\ensuremath{\mathcal I}}
\newcommand{\cW}{\ensuremath{\mathcal W}}

\newcommand{\R}{\ensuremath{\mathbb R}}
\newcommand{\C}{\ensuremath{\mathbb C}}
\newcommand{\PP}{\ensuremath{\mathbb P}}
\newcommand{\Z}{\ensuremath{\mathbb Z}}
\newcommand{\Q}{\ensuremath{\mathbb Q}}
\newcommand{\A}{\ensuremath{\mathbb A}}
\newcommand{\bbH}{\ensuremath{\mathbb H}}
\newcommand{\bbP}{\ensuremath{\mathbb P}}
\newcommand{\bbI}{\ensuremath{\mathbb I}}
\newcommand{\bS}{\ensuremath{\mathbb S}}

\newcommand{\half}{\ensuremath{\frac{1}{2}}}
\newcommand{\qtr}{\ensuremath{\frac{1}{4}}}
\newcommand{\bq}{{\mathbf q}}
\newcommand{\N}{{\mathcal N}}
\newcommand{\F}{{\mathcal F}}
\newcommand{\HH}{{\mathcal H}}
\newcommand{\LL}{{\mathcal L}}
\newcommand{\RR}{{\mathcal R}}
\newcommand{\V}{{\mathcal V}}
\newcommand{\dirac}{\!\!\not\!\partial}
\newcommand{\Dirac}{\!\!\not\!\!D}
\newcommand{\cE}{{\mathcal E}}
\newcommand{\vs}{\not\!v}
\newcommand{\kahler}{K\"ahler\xspace}
\newcommand{\kq}{/\!\!/}
\newcommand{\kql}[1]{/\!\!/\!\!_#1\,}
\newcommand{\hk}{hyperk\"ahler\xspace}
\newcommand{\Hk}{Hyperk\"ahler\xspace}
\newcommand{\hkq}{/\!\!/\!\!/\!\!/}
\newcommand{\hkql}[1]{/\!\!/\!\!/\!\!/\!\!_#1\,}
\newcommand{\del}{\ensuremath{\partial}}
\newcommand{\delbar}{\ensuremath{\overline{\partial}}}
\newcommand{\I}{{\mathrm i}}
\newcommand{\J}{{\mathrm j}}
\newcommand{\K}{{\mathrm k}}
\newcommand{\e}{{\mathrm e}}
\newcommand\bid{{\mathbf 1}}
\newcommand{\de}{\mathrm{d}}
\newcommand{\ab}{\mathrm{ab}}
\newcommand{\sing}{\mathrm{sing}}
\newcommand{\reg}{\mathrm{reg}}
\newcommand{\vol}{\mathrm{vol}}
\renewcommand{\sf}{\mathrm{sf}}
\newcommand{\inst}{\mathrm{inst}}
\newcommand{\eff}{\mathrm{eff}}
\newcommand{\dR}{\mathrm{dR}}
\newcommand{\closed}{\mathrm{closed}}
\newcommand{\exact}{\mathrm{exact}}
\newcommand{\gauge}{\mathrm{gauge}}
\newcommand{\flavor}{\mathrm{flavor}}

\newcommand{\abs}[1]{\lvert#1\rvert}
\newcommand{\norm}[1]{\lVert#1\rVert}
\newcommand{\IP}[1]{\langle#1\rangle}
\newcommand{\DIP}[1]{\langle\!\langle#1\rangle\!\rangle}
\newcommand{\dwrt}[1]{\frac{\partial}{\partial#1}}
\newcommand{\eps}{\epsilon}
\newcommand{\simarrow}{\xrightarrow\sim}

\newcommand{\bSigma}{{\overline \Sigma}}
\newcommand{\vphi}{{\vec\phi}}

\newcommand{\mmaref}[1]{}

\newcommand{\ti}[1]{\textit{#1}}
\newcommand{\tb}[1]{\textbf{#1}}

\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\im}{Im}
\DeclareMathOperator{\re}{Re}
\DeclareMathOperator{\Tr}{Tr}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\Lie}{Lie}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\Bun}{Bun}
\DeclareMathOperator{\Vect}{Vect}
\DeclareMathOperator{\Span}{Span}
\DeclareMathOperator{\grad}{grad}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\ind}{ind}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\Jac}{Jac}
\DeclareMathOperator{\Pic}{Pic}
\DeclareMathOperator{\Prym}{Prym}
\DeclareMathOperator{\Hol}{Hol}
\DeclareMathOperator{\gr}{gr}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\Tot}{Tot}
\DeclareMathOperator{\pdeg}{pdeg}
\DeclareMathOperator{\Gr}{Gr}
\DeclareMathOperator{\DT}{DT}

\newcommand{\SU}{\mathrm{SU}}
\newcommand{\Sp}{\mathrm{Sp}}
\newcommand{\U}{\mathrm{U}}

\newcommand{\insfig}[2]{

\medskip
\noindent
\begin{minipage}{\linewidth}

\makebox[\linewidth]{\includegraphics[keepaspectratio=true,scale=#2]{figures/#1-crop.pdf}}

\end{minipage}
\medskip

}


% \newcommand{\insfig}[2]{\begin{figure}[htbp] \centering \includegraphics[scale=#2]{figures/#1-crop.pdf} \label{fig:#1} \end{figure}}
% syntax: \insfig{name}{0.5}{caption}

\newcommand{\fixme}[1]{{\color{orange}{[#1]}}}
\newcommand{\currentposition}{{\color{blue} \noindent\makebox[\linewidth]{\hdashrule{\paperwidth}{1pt}{3mm}}}}

% \mathtoolsset{showonlyrefs}

\bibliography{higgs-metric}

\begin{document}

\pagestyle{fancy}
\lhead{{\tiny \color{gray} \tt \gitAuthorIsoDate}}
\chead{\tiny \ti{Metric on moduli of Higgs Bundles, \tb{preliminary} and \tb{incomplete} draft}}
\rhead{{\tiny \color{gray} \tt \gitAbbrevHash}}
\renewcommand{\headrulewidth}{0.5pt}


\begin{center}
\tb{Metric on moduli of Higgs Bundles} \\
Andrew Neitzke \\
\tb{Preliminary} and \tb{incomplete} draft
\end{center}

{These are the notes for a lecture series on moduli of Higgs bundles.
The latest version can be found at
\begin{center}
\small \url{http://ma.utexas.edu/users/neitzke/expos/higgs-metric.pdf}
\end{center}
% Please send corrections/improvements to
% \begin{center}
% \small \tt\href{mailto:neitzke@math.utexas.edu}{neitzke@math.utexas.edu}
% \end{center}
% or as pull requests to the source repository hosted at
% \begin{center}
% \small \url{http://github.com/neitzke/higgs-metric}
% \end{center}
}

% \tableofcontents
% \renewcommand{\listtheoremname}{Quick reference}
% \listoftheorems[onlynamed]

% \newpage


\section{Overview}

\fixme{need to add many references}

The aim of these lectures is to describe a \ti{conjectural} 
approach to 
``more explicitly'' understanding the \hk metric $g$ on 
the moduli space $\cM$ of Higgs bundles.

The basic structure we are aiming for is as follows.
$\cM$ is a complex integrable system: this means that
it admits a holomorphic fibration $\pi: \cM \to \cB$
with complex Lagrangian fibers.
There is a complex codimension $1$ 
``singular locus'' $\cB_\sing \subset \cB$.
Let $\cB_\reg = \cB \setminus \cB_\sing$,
and $\cM_\reg = \pi^{-1}(\cB_\reg)$
On $\cM_\reg$, the fibers of $\pi$ are compact
complex tori, roughly the Jacobians of a
family of smooth \ti{spectral curves} $\Sigma_\vphi \subset T^* C$
parameterized by $\vphi \in \cB_\reg$.

The picture is that the \hk metric $g$ on $\cM$ is constructed
from two constituents:
\begin{itemize}
  \item The special \kahler structure on $\cB_\reg$, constructed from \ti{periods} of the spectral curves $\Sigma_\vphi$ ($\vphi \in \cB_\reg$),
  \insfig{higgs-metric-4}{0.9}
  \item A collection of integer ``Donaldson-Thomas invariants,''
  which (in a tropical sense) count special Lagrangian discs
  in $T^*C$ with boundary on $\Sigma_\vphi$.
  \insfig{higgs-metric-5}{0.8}
\end{itemize}


If one neglects the Donaldson-Thomas invariants one obtains
a simple and explicit \hk metric $g^\sf$ on $\cM_\reg$, 
the ``semiflat metric,'' so called
because it is flat (and translation invariant) on the torus
fibers. $g^\sf$ however does not extend to the full $\cM$.

The effect of the Donaldson-Thomas invariants
is to add corrections which break the translation invariance.
Away from $\cM_\sing$, these corrections are of the order 
$\e^{-M}$ where $M$ is the area of the smallest 
special Lagrangian disc, i.e. we predict
\begin{equation}
  g = g^\sf + O(\e^{-M}).
\end{equation}
In particular, if we follow some path to infinity in $\cM$
along which $M \to \infty$, we expect to see $g$
converging to $g^\sf$.
On the other hand, as we approach $\cM_\sing$ the effect
of these corrections is large: it smoothes out the singularity
of $g^\sf$ (partially or completely, depending whether
$\cM$ is smooth or not.)

The strategy of the lectures will be roughly:
\begin{enumerate}
  \item The moduli space $\cM$, its fibration $\cM \to \cB$ and special \kahler structure.
  \item The conjectural metric construction.
  \item The available evidence that the conjecture is correct.
\end{enumerate}


\section{Background on Hitchin system}

\subsection{Data}

Throughout these lectures we will fix data $(G,C,\vec m)$ as follows:
\begin{itemize}
  \item a group $G = \SU(K)$ or $\U(K)$, with diagonal subgroup $T \subset G$,
  \item a compact Riemann surface $C$, equipped with a finite subset $P \subset C$,
  \item a vector $\vec{m}_p = (m^\C_p, m^\R_p) \in \C^K \oplus (\R / 2 \pi \Z)^K$ for each $p \in P$.
\end{itemize}
We write $\Tr$ for the sum of the entries of a $K$-vector.
If $G = \SU(K)$ then we require
$\Tr m_p^\C = 0$ and $\Tr m_p^\R = 0$.
If $G = \U(K)$ we require instead 
$\sum_{p \in P} \Tr m_p^\C = 0$,
$\sum_{p \in P} \Tr m_p^\R = 0$.

We require that $2g_C + \abs{P} - 2 > 0$; equivalently, 
if $C$ has genus $0$ we require $\abs{P} \ge 3$, 
and if $C$ has genus $1$ we require $\abs{P} \ge 1$.
\insfig{higgs-metric-1}{0.8}

\begin{defn}[Generic puncture data]
We say $\vec{m}$ is \ti{generic} if each $m^\C_p \in \C^K$
has all entries distinct. 
The generic case is the simplest
case, and for the main purposes of these lectures,
it is fine to restrict to the generic case throughout.
\end{defn}

\begin{example}[The case of $G = \SU(2)$]
A good case to keep in mind is the case $G = \SU(2)$. In that case our data reduces to a Riemann surface $C$, a finite subset $P \subset C$,
and numbers $m^\C_p \in \C$, $m^\R_p \in \R$ for each $p \in P$. The generic case is the case when all $m^\C_p \neq 0$.
\end{example}

\begin{remark} The outputs of all our constructions will 
be invariant under the symmetric group $S_K$ acting on $\vec m_p$.
\end{remark}

% \fixme{remark on irregular singularities?}

\subsection{Moduli of Higgs bundles}

Usually one would start out with ordinary Higgs bundles,
but with an eye to what will come later, we go straight
to the parabolic case. Roughly this means that we will consider
Higgs fields which, rather than being holomorphic, are
allowed to have simple poles at the points $p \in P$.

\begin{defn}[Parabolic Higgs bundles for $G = \U(K)$]
When $G = \U(K)$, a $(G, C, \vec m)$-\ti{Higgs bundle} is a pair $(E, \varphi)$, where:
\begin{itemize}
  \item $E$ is a holomorphic vector bundle of rank $K$ over $C$,
  % (reduction
  % to the parabolic subgroup whose Levi subgroup is the 
  % normalizer of $m_p^\R$),
  % parabolic weights given by $m_p^\R$ and total parabolic degree zero,
  \item $\varphi$ is a holomorphic section of $\End E \otimes K_C(P)$,
  % compatible with the parabolic structure at each $p \in P$, 
  % with generalized eigenvalues of the residue given by $m_p^\C$.
\end{itemize}
with additional ``parabolic structure'' at the points $p \in P$
as follows. Each $E_p$ carries a decreasing filtration with weights in $[0,2\pi)$, where 
\begin{equation}
  \dim \Gr_\alpha E_p = \text{multiplicity of $\alpha$ in $m^\R$}.
\end{equation}
The residue $\Res_p \varphi$
preserves the filtration on $E_p$ and thus descends to
act on the graded pieces $\Gr_\alpha E_p$, with generalized
eigenvalues determined by $m^\C$. Altogether then,
\begin{equation}
 \Gr E_p = \bigoplus_{\vec{\lambda}} E_{p,\vec\lambda}
\end{equation}
where $E_{p,\vec\lambda}$ is in grade $\lambda^\R$, and 
$\Res_p \varphi$ acts on $E_{p,\vec\lambda}$
with generalized eigenvalue $\lambda^\C$.
\end{defn}

Relative to a local holomorphic trivialization of $E$
and local coordinate on $C$, $\varphi$ would
be written as a matrix of holomorphic $1$-forms: e.g. for $G = \SU(2)$,
\begin{equation}
  \varphi = \begin{pmatrix} f_1 & f_2 \\ f_3 & -f_1 \end{pmatrix} \de z,
\end{equation}
where all $f_i$ are holomorphic functions of $z$. 

\begin{remark}[Parabolic structure in case of generic puncture data]
The case of generic puncture data is simpler:
then $E_p = \bigoplus_{\vec\lambda} E_{p,\vec\lambda}$
with all $E_{p,\vec\lambda}$ one-dimensional, $\Res_p \varphi$ 
acting by $\lambda^\C$, and filtration weight given by $\lambda^\R$.
\end{remark}

\begin{remark}[Motivation of the filtration]
One can think of the filtration as a sort of modification
of the structure of the bundle $E$ to allow fractional
orders of vanishing: given a section
$s$ of $E$, if $s(p)$ is in the weight $\alpha$ piece of $E_p$,
then we say that $s(p)$  ``vanishes to order $\frac{\alpha}{2\pi}$ at $p$''. This explains in particular why we have the strange
restriction that the weights lie in $[0,2\pi)$: changing the order
of vanishing by an integer can be accomplished as usual by multiplying sections by $z^n$.
\end{remark}

\begin{defn}[Parabolic Higgs bundles for $G = \SU(K)$]
When $G = \SU(K)$, we impose the additional condition that
$\det E$ is trivial \fixme{in the parabolic sense...} and 
$\Tr \varphi = 0$.
\end{defn}

\begin{defn}[Parabolic degree]
Let $E$ be a $(G, C, \vec m)$-Higgs bundle,
and $E' \subset E$ any holomorphic subbundle preserved by
$\varphi$. Then $E'_p$ also get a filtration with
weights in $[0,2\pi)$, and we define
\begin{equation} \label{eq:pdeg}
  \pdeg E' = \deg E' + \frac{1}{2\pi} \sum_p \sum_{\mu \in [0,2\pi)} \mu \dim \Gr^\mu E'_p.
\end{equation}
\end{defn}

The extra term in \eqref{eq:pdeg} keeps track of how $E'$
sits relative to the filtration of $E_p$.

\begin{example}[Parabolic degrees in the simplest case]
Thus, for example, with generic puncture data and $G = \SU(2)$,
the two weights which occur in the decomposition of 
$\Gr E_p$ are of the form
$(\alpha, 2\pi-\alpha)$, for some $\alpha \le \pi$.
Now suppose $E' \subset E$ is a line subbundle.
If $E'_p \subset E_p$ is a generic line, then the contribution
to $\pdeg E'$ from $p$ will be $\frac{\alpha}{2\pi}$; the
only exception arises if $E'_p$ is the line 
$E_{p,\vec\lambda}$ with $\lambda^\R = \alpha$, in which case 
the contribution will be $1 - \frac{\alpha}{2\pi}$. 
\end{example}

\begin{remark}Our conditions on $m^\R$ imply that the whole bundle $E$ has $\pdeg E \in \Z$,
either for $G = \U(K)$ or $G = \SU(K)$.
\end{remark}

\begin{defn}[Parabolic stability]
We say $E$ is \ti{stable} if for all $E' \subset E$ preserved
by $\varphi$ we have
\begin{equation}
  \frac{\pdeg E'}{\rank E'} < \frac{\pdeg E}{\rank E}.
\end{equation}
We say $E$ is \ti{polystable} if it is a direct sum of
stable Higgs bundles with the same $\frac{\pdeg}{\rank}$.
\end{defn}

\begin{prop}[Moduli space of Higgs bundles exists]
There is a moduli space $\cM = \cM(G,C,\vec{m})$ parameterizing
polystable Higgs bundles $(E,\varphi)$, with $\pdeg E = 0$, 
up to equivalence. 
$\cM$ is a complex manifold away
from the locus of unstable (but still polystable) Higgs bundles.
It carries a natural holomorphic symplectic form $\Omega_1$.
\end{prop}


The holomorphic symplectic form 
$\Omega_1$ comes from the fact that variations of the
holomorphic bundle $E$ are valued in $\Omega^{0,1}(\End E)$,
while variations of the Higgs field $\varphi$ are
valued in $\Omega^{1,0}(\End E)$,
and the two are naturally dual. \fixme{with some care
around punctures}

\begin{remark}[Dimension of $\cM$]
The complex dimension of $\cM$ is
\begin{equation} \label{eq:dim-M}
  \dim_\C \cM = \begin{cases} (2g_C-2) K^2 + 2 + \abs{P} K(K-1), & \quad G = \U(K), \\ (2g_C-2) (K^2-1) + \abs{P} K(K-1), & \quad G = \SU(K). \end{cases}
\end{equation}
From now on we write $\dim_\C \cM = 2r$.
\end{remark}

\begin{example}[The abelian case]
$G = \U(1)$ is the abelian case, in which $\dim_\C \cM = 2g_C$ irrespective
of $\abs{P}$. When $P = \emptyset$ we have simply $\cM = T^* \Jac C$, the cotangent
bundle to a compact complex torus. When $P \neq \emptyset$, $\cM$ is a torsor
over $T^* \Jac C$.
This is the only example of $\cM$ which is so ``linear'' in nature:
for nonabelian $G$ the space $\cM$ will be much more interesting.
\end{example}

\begin{example}[Some low-dimensional nonabelian cases] Here are a few examples:
\begin{itemize}
\item If $G = \SU(2)$ and $C$ is a genus $0$ curve with $\abs{P} = 4$,
then $\dim_\C \cM = 2$.
\item If $G = \SU(3)$
and $C$ is a genus $0$ curve with $\abs{P}=3$,
then again $\dim_\C \cM = 2$.
\item If we want to take $P = \emptyset$,
then the simplest nonabelian case is
$G = \SU(2)$ and $C$ a genus $2$ curve, in which case
$\dim_\C \cM = 6$. 
\end{itemize}
\end{example}

\begin{remark}[Restriction of Jordan form]
When some $\vec\lambda$ occurs with multiplicity
greater than $1$ in $\vec{m}_p$, there 
is a natural way of getting a subspace of $\cM$:
we can restrict the Jordan block structure of
the unipotent endomorphism $\Res_p \varphi$
acting in each $E_{p,\vec\lambda}$ (e.g. if $\vec\lambda$ has
multiplicity $2$ we can require that $\Res_p \varphi$ acts
by the scalar $\lambda^\C$ in $E_{p,\vec\lambda}$ instead of
a nontrivial Jordan block). This subspace can be considered
as a moduli space of Higgs bundles in its own right, which
has all the structure we will discuss
in the rest of these lectures; 
in particular we can get
more $2$-dimensional examples in this way.
\end{remark}



\subsection{The Hitchin map}

Now we want to exhibit $\cM$ as a complex integrable system,
i.e. a holomorphic Lagrangian fibration.

Given a Higgs bundle $(E,\varphi) \in \cM$ we can consider
the eigenvalues of $\varphi(z)$: as $z \in C$ varies
these sweep out a curve in $\Tot[K_C(P)]$, a $K$-fold cover of $C$:
\begin{equation}
  \Sigma = \{ \lambda: \det(\lambda - \varphi) = 0\} \subset \Tot[K_C(P)].
\end{equation}
The curve $\Sigma$ is an invariant of the Higgs 
bundle $(E,\varphi)$, which we call
the \ti{spectral curve}. 
The projection to $C$ induces $\rho: \Sigma \to C$ which is a $K$-fold branched covering.

Now what are all the curves $\Sigma$
we can get in this way?
We can describe them by their coefficients, ie write
\begin{equation} \label{eq:spectral-coeffs}
  \det(\lambda - \varphi) = \lambda^K + \sum_{n=1}^K \lambda^{K-n} \phi_n = 0, \qquad \phi_n \in K_C(P)^n.
\end{equation}
Then we can write $\Sigma = \Sigma_{\vphi}$ where
$\vphi = (\phi_1, \dots, \phi_K)$.
The coefficients $\vphi$ lie in the Hitchin base:
\begin{defn}[Hitchin base]
If $G = \U(K)$,
the \ti{Hitchin base} $\cB = \cB(G,C,m^\C)$ is
the space of tuples $\vphi = (\phi_1, \phi_2, \dots, \phi_K)$
where $\phi_n$ is a holomorphic section of $K_C(P)^n$,
and $m_p^\C$ controls the residues $\phi_n(p)$ via the equation\footnote{Recall that for a section of $K_C^n$ the residue at a pole is the coefficient of $\frac{(\de z)^n}{z^n}$: this is a well
defined complex number. This generalizes the case of a meromorphic $1$-form
where the residue at a pole is the coefficient of $\frac{\de z}{z}$. Said otherwise, the fiber of
$K_C(P)$ over $p \in P$ is canonically trivial,
and likewise for $K_C(P)^n$.}
\begin{equation}
  \det (\lambda - m_p^\C) = \lambda^K + \sum_{n=1}^K \lambda^{K-n} \phi_n(p).
\end{equation}
If $G = \SU(K)$ then we make the same definition except that
$\phi_1 = 0$ everywhere.
$\cB$ is a complex affine space, a torsor for the complex vector space
of $\vphi$ vanishing at $P$.
% \begin{equation}
%   \cB_0 = \begin{cases} \bigoplus_{n=1}^K H^0\left(C, K_C^n((n-1)P)\right), & G = \U(K), \\
%   \bigoplus_{n=2}^K H^0\left(C, K_C^n((n-1)P)\right), & G = \SU(K).
%   \end{cases}
% \end{equation}

\begin{defn}[Hitchin map]
The \ti{Hitchin map} is the map $\pi: \cM \to \cB$ given by
\begin{equation}
  (E, \varphi) \mapsto (\phi_1, \dots, \phi_K)
\end{equation}
where the $\phi_n$ are defined by \eqref{eq:spectral-coeffs}.
\end{defn}

\begin{prop}[Hitchin map has Lagrangian fibers] The fibers
$\cM_\vphi = \pi^{-1}(\vphi)$ 
are compact complex Lagrangian subsets of $(\cM, \Omega_1)$. (In particular, $\dim_\C \cB = \half \dim_\C \cM$.)
\end{prop}

\fixme{say why?}

We can say more precisely what the fibers are, at least 
over most of the Hitchin base:

\begin{defn}[Singular locus and smooth locus]
The \ti{singular locus} $\cB_\sing \subset \cB$ is the set of $\vphi \in \cB$
for which $\Sigma_{\vec \phi}$ is singular. $\cB_\sing$ has complex codimension $1$ in $\cB$.
The \ti{smooth locus} is $\cB_\reg = \cB \setminus \cB_\sing$.
We also let $\cM_\reg = \pi^{-1}(\cB_\reg)$.
\end{defn}

\begin{prop}[Fibers of the Hitchin map over $\cB_\reg$]
Suppose $\vphi \in \cB_\reg$. Let $\cM_\vphi = \pi^{-1}(\vphi)$.
Then:
\begin{itemize}
  \item If $G = \U(K)$, then $\cM_\vphi$ is a torsor over
$\Jac \Sigma_\vphi$. After choosing spin structures on 
$C$ and on $\Sigma$, in the case of generic puncture data, 
we can identify $\cM_\vphi$ with the space
of flat $U(1)$-connections over $\Sigma_\vphi$ with holonomy
around $\rho^{-1}(P)$ given by $\exp(\I m^\R)$.
 \item If $G = \SU(K)$, then $\cM_\vphi$ is a torsor over
$\Prym (\rho: \Sigma_\vphi \to C)$. 
After choosing spin structures on 
$C$ and on $\Sigma$, in the case of generic puncture data, 
we can identify $\cM_\vphi$ with the space
of flat $U(1)$-connections $\nabla$ over $\Sigma_\vphi$ with holonomy
around $\rho^{-1}(P)$ given by $\exp(\I m^\R)$, 
equipped with a trivialization of $\det \rho_* \nabla$.
\end{itemize}
\end{prop}

So we reach the following picture: a point $\vphi \in \cB_\reg$
gives a smooth spectral curve $\Sigma_\vphi$; the torus
$\cM_\vphi$ is a space of flat $U(1)$-connections
over $\Sigma_\vphi$, with fixed holonomies around the
punctures.

% \begin{remark}[More precise picture of the fibers
% when $G = \U(K)$]
% A more precise description would say exactly \ti{which} torsor 
% $\cM_\vphi$ is. For example, when $G = \U(K)$,
% in the case of generic puncture data,
% $\cM_\vphi$ is the moduli space of parabolic line bundles
% over $\Sigma_\vphi$ with parabolic degree $-K(K-1)(g_C-1)$
% and parabolic weights at the $K$ preimages of $p$ given
% by the $K$ components of $m^\R_p$.
% After choosing spin structures on $C$ and on $\Sigma$
% we can shift the parabolic degree to zero.
% So then we can identify $\cM_\vphi$ with the space of
% flat $U(1)$-connections over $\Sigma_\vphi$ with holonomy
% around $\rho^{-1}(P)$ given by $\exp(2 \pi \I m^\R)$.
% \end{remark}

% When $\vphi \in \cB_\sing$, $\cM_\vphi$ is compact,
% but generally singular.

\begin{remark}[Concrete description of the singular locus]
What is $\cB_\sing$ concretely?
The branch locus of the covering $\rho: \Sigma_\vphi \to C$ 
is the zero locus of the discriminant $\Delta_{\vphi}$ of the equation \eqref{eq:spectral-coeffs}. $\Delta_\vphi$ 
is a holomorphic section of $K_C(P)^{K(K-1)}$;
e.g. for $G = \SU(2)$,
$\Delta_{\vphi} = - 4 \phi_2$.
$\vphi \in \cB_\reg$ iff $\Delta_\vphi$ has only simple zeroes; in this case
it has $K(K-1)(2g_C+\abs{P}-2)$ of them, and the genus of $\Sigma_\vphi$ is
  $g_\Sigma = 1 + K^2(g_C - 1) + \half K(K-1) \abs{P}$.
\end{remark}

\begin{example}[Hitchin base and spectral curves for $G = \SU(2)$]
When $G = \SU(2)$, $\cB$ is the space of meromorphic quadratic
differentials $\phi_2$ on $C$, with a pole of order $\le 2$ at 
each $p \in P$, of residue $\Res_p \phi_2 = (m_p^\C)^2$.
% It is a torsor over the space $\cB_0$ of meromorphic quadratic differentials
% with pole order $\le 1$ at each $p \in P$. 
It has complex dimension
$\dim_\C \cB = 3 g_C - 3 + \abs{P}$. 
The spectral curve for a given $\phi_2 \in \cB$
is
\begin{equation}
  \Sigma_{\phi_2} = \{\lambda: \lambda^2 + \phi_2 = 0\} \subset \Tot[K_C(P)].
\end{equation}
$\Sigma_{\phi_2}$ is a $2$-fold branched covering of $C$, branched at the zeroes of $\phi_2$.
The regular locus $\cB_\reg \subset \cB$ consists of those $\phi_2$ which have only simple zeroes ($4 g_C + 2\abs{P} - 4$ of them).
\end{example}
\end{defn}


\begin{example}[A one-dimensional Hitchin base]
Suppose $G = \SU(2)$, $\abs{P} = 4$, $g_C = 0$.
\begin{itemize}
  \item
If $m^\C = 0$, $\cB$ is a complex vector space of dimension $1$,
and $\cB_\sing \subset \cB$ is the origin;
for generic $m^\R$,
the fiber $\cM_{\vphi =0}$ consists of five $\bbP^1$
arranged in an affine $D_4$ configuration.

\item If $m^\C \neq 0$, $\cB$ is a complex affine space of dimension $1$.
If $m^\C$ is completely generic, $\cB_\sing \subset \cB$ consists
of $6$ points, and the fiber $\cM_\vphi$ over any $\vphi \in \cB_\sing$ is
a nodal torus. (For special choices of $m^\C$ some of these discriminant points 
may collide.)
\end{itemize}
\end{example}

\insfig{higgs-metric-2}{0.85}

We should emphasize that this one-dimensional example can lead to the
wrong mental picture about the generic case: generally,
when $m^\C = 0$, $\cB_\sing$ is some codimension-$1$ cone inside $\cB$, and in particular,
when $\dim \cB > 1$, $\cB_\sing$ is not compact. For $m^\C \neq 0$, $\cB_\sing \subset \cB$
is not a cone anymore, but near asymptotic infinity of $\cB$,
it still looks asymptotically like a cone.



\subsection{The \hk metric}

A key fact about $\cM$ is that it carries a canonically
defined \hk metric $g$. However, $g$ is not easily
written in closed form.

To construct $g$, one needs to consider \ti{Hitchin's equation}:
given a Higgs bundle $(E,\varphi)$ this is a PDE
for a Hermitian metric $h$ in $E$, written
\begin{equation} \label{eq:hitchin-equation}
  F_{D_h} + [\varphi, \varphi^{\dagger_h}] = 0.
\end{equation}
Here $D_h$ denotes the Chern connection in $(E,h)$,
the unique $h$-unitary connection compatible with
the holomorphic structure of $E$.
One considers \eqref{eq:hitchin-equation} for
metrics $h$ which are smooth on $C - P$ and
have a prescribed singular behavior near each
$p \in P$.
\begin{defn}[Adapted metrics for generic puncture data] 
In the case of generic puncture data, a Hermitian metric $h$
in $E$ is \ti{adapted} if, for a holomorphic section $s$ 
where $s(p) \in E_p$ has grade $\alpha$, we have
$h(s,s) \sim \abs{z}^{\frac{2 \alpha}{2\pi}}$ near $p$.
\end{defn}

\begin{remark}[Holonomy of $D_h$ around punctures for generic puncture data]
For an adapted metric $h$ on $E$, and generic puncture data, 
the holonomy of $D_h$ around $p$
is just $\exp(\I m^\R)$. This is one of the most concrete ways
of understanding the role of $m^\R$ in the story.
\end{remark}

For more general puncture data, the situation is a bit 
more complicated: in addition to polynomial growth
we need to allow logarithmic behavior, in a way dictated
by the Jordan block structure of $\varphi$. \fixme{cite Simpson}

A basic fact is: \fixme{refs: Simpson}
\begin{thm}[Existence of harmonic metrics] \label{thm:hitchin-existence}
The equation \eqref{eq:hitchin-equation} has an
adapted solution $h$ for each $(E,\varphi)$;
this $h$ is unique up to scalar multiple.
We call $h$ the \ti{harmonic metric}.
\end{thm}

Using \autoref{thm:hitchin-existence}
one can define Hitchin's metric on $\cM$, as follows.
Given a tangent vector $v$ to $\cM$ whose norm we wish to calculate, we represent $v$ by a family of Higgs bundles
$(E_t,\varphi_t)$, with harmonic metrics $h_t$.
Identifying the underlying Hermitian bundles with a single $(E,h)$
we have an arc of unitary connections $D_t$ and skew-Hermitian 
Higgs fields $\Phi_t = \varphi_t - \varphi_t^\dagger$ 
on $(E,h)$, determined up to gauge transformations i.e. 
automorphisms of $(E,h)$.
In particular, differentiating at $t = 0$ gives a pair
\begin{equation}
\frac{\de}{\de t}\Bigg\rvert_{t=0} (D_t, \Phi_t) = 
(\dot A, \dot \Phi) \in \Omega^1(\fu(E)) \oplus \I \Omega^{1}(\fu(E)),
\end{equation}
defined up to gauge transformations.
Then the norm of $v$ is the $L^2$ norm
\begin{equation}
  g(v,v) = \int_C \norm{\dot A}^2 + \norm{\dot \Phi}^2
\end{equation}
where for $(\dot A, \dot \Phi)$ we choose the representative
\ti{minimizing} the norm.

\begin{remark}[\Hk quotient] I have not really explained
why the metric $g$ constructed in this way turns out to 
be \hk, or even \kahler. The most conceptual explanation
of this comes by viewing the construction in terms of 
an infinite-dimensional \hk quotient \fixme{cite Hitchin}.
\end{remark}

% \subsection{Hyperkahler structure}

% Although it is not obvious from the way I have described it
% here, the metric $g$ on $\cM$ is in fact \hk.
% In particular, it carries symplectic structures 
% $\omega_1$, $\omega_2$, $\omega_3$:
% \fixme{review the basic structure}
% \fixme{check signs}
% \begin{subequations} \label{eq:symplectic-forms-higgs}
% \begin{align}
%   \omega_1((\dot A_1, \dot \Phi_1),(\dot A_2, \dot \Phi_2)) &= \int_C \Tr(- \dot A_1 \wedge \dot A_2 + \dot \Phi_1 \wedge \dot \Phi_2), \\
%   \omega_2((\dot A_1, \dot \Phi_1),(\dot A_2, \dot \Phi_2)) &= \int_C \Tr(\dot \Phi_1 \wedge \star \dot A_2 - \dot A_1 \wedge \star \dot \Phi_2), \\
%   \omega_3((\dot A_1, \dot \Phi_1),(\dot A_2, \dot \Phi_2)) &= \int_C \Tr(\dot\Phi_1 \wedge \dot A_2 + \dot A_1 \wedge \dot \Phi_2).
% \end{align}
% \end{subequations}
% and complex structures
% $I_1$, $I_2$, $I_3$:
% \begin{subequations}
% \begin{align}
%  I_1(\dot A, \dot \Phi) &= (\star \dot A, - \star \dot \Phi), \\
%  I_2(\dot A, \dot \Phi) &= (- \dot \Phi, \dot A), \\
%  I_3(\dot A, \dot \Phi) &= (- \star \dot\Phi, - \star \dot A).
% \end{align}
% \end{subequations}







% In particular, $\cM$ is noncompact.

\subsection{The special \kahler structure}

The regular part of the Hitchin base $\cB_\reg$ 
carries a (rigid) special \kahler structure, as follows.

\begin{defn}[Charge lattices for $G = \U(K)$]
Suppose $G = \U(K)$ and $\vphi \in \cB_\reg$. 
Then define:
\begin{itemize}
 \item $\Gamma^\flavor = \bigoplus_{p \in P} \Gamma^{\flavor,p}$ where $\Gamma^{\flavor,p}$
 is the weight lattice of the centralizer of $m^\C_p$,
 \item $\Gamma_\vphi^\gauge = H_1(\Sigma_\vphi, \Z)$,
 % \item $\Gamma_\vphi = H_1(\Sigma_\vphi - \rho^{-1}(P), \Z)$,
 \item $\Gamma_\vphi = \left( \Gamma^\flavor \oplus H_1(\Sigma'_\vphi,\Z) \right) / \sim$
\end{itemize}
where $\Sigma'_\vphi = \Sigma_\vphi - \pi^{-1}(P)$,
and the relation $\sim$ is as follows. A point of $\pi^{-1}(p)$ with ramification index $\nu$ corresponds to a factor $\U(\nu)$ in the centralizer of $m_p^\C$. We identify a clockwise 
loop around this point with the weight of the 
determinant representation of this $\U(\nu)$ factor.
\end{defn}

\begin{example}[Charge lattices for generic puncture data]
When the puncture data is generic, we can say all this
more simply:
\begin{itemize}
 \item $\Gamma^\flavor$ is the free $\Z$-module generated
by loops around the points of $\rho^{-1}(P)$,
 \item $\Gamma_\vphi^\gauge = H_1(\Sigma_\vphi, \Z)$,
 \item $\Gamma_\vphi = H_1(\Sigma'_\vphi, \Z)$.
\end{itemize}
\end{example}

In any case, these lattices assemble into an exact 
sequence of local systems of lattices over $\cB_\reg$,
\begin{equation} \label{eq:lattice-extension}
0 \to \Gamma^\flavor \to \Gamma \to \Gamma^\gauge \to 0.
\end{equation}
$\Gamma^\gauge$ also has a nondegenerate skew pairing,
the intersection pairing on $H_1(\Sigma_\vphi, \Z)$.
We will sometimes write local formulas using a local
trivialization of $\Gamma^\gauge$ by ``$A$ and $B$ cycles''
obeying
\begin{equation}
  \IP{A^I, A^J}=0, \quad \IP{B_I, B_J}=0, \quad \IP{A^I,B_J} = \delta^I_J.
\end{equation}


\begin{defn}[Period map]
Let $\lambda$ denote the meromorphic $1$-form on $\Tot[K_C(P)]$,
induced by the tautological (Liouville) holomorphic $1$-form
on $\Tot[K_C]$.
$\lambda$ has poles along $\rho^{-1}(P)$.
The \ti{period map} is the map
\begin{equation}
   Z_\vphi: \Gamma_\vphi \to \C, \qquad Z_\vphi(\gamma) = \oint_\gamma \lambda
\end{equation}
which we could also view as an element $Z \in \Gamma^*_\C$.
\end{defn}
The restriction of $Z_\vphi$ to the image of $\Gamma^\flavor$ is constant. 
It follows that the derivative $\de Z: \Gamma \to T^* \cB_\reg$ descends to
$\de Z: \Gamma^\gauge \to T^* \cB_\reg$,
which we can also view as
\begin{equation}
  \de Z \in T^* \cB_\reg \otimes (\Gamma_\C^\gauge)^*
\end{equation}
% Note moreover the dimensional ``coincidence'' that
% $\rank \Gamma^\gauge = 2 \dim_\C \cB_{\reg}$.
Let $\IP{,}$ denote the intersection pairing on $\Gamma^\gauge$
and $\DIP{,}$ its inverse on $(\Gamma^\gauge)^*$.
Then we can define a $2$-form
$\DIP{\de Z,  \de Z} \in \Omega^{2,0}(\cB_\reg)$.
Using a local trivialization of $\Gamma^\gauge$ we have
\begin{equation}
  \DIP{\de Z,  \de Z} = \sum_{I=1}^n \de Z(A^I) \wedge \de Z(B_I).
\end{equation}


\begin{prop}[Lagrangian property] We have
\begin{equation}  \label{eq:lagrangian-property}
\DIP{\de Z, \de Z} = 0.
\end{equation}
\end{prop}

Note that \eqref{eq:lagrangian-property} is automatic in case
$\dim_\C \cB = 1$, but otherwise it is a nontrivial
constraint on $Z$. The idea of the proof
of \eqref{eq:lagrangian-property} (in the unpunctured case)
is to consider two
tangent vectors to $\cB$ i.e. infinitesimal variations 
of $\Sigma$, and study the corresponding variations 
$\delta_1, \delta_2$ of 
the cohomology class $[\lambda] \in H^1(\Sigma,\C)$ 
by integrating along arbitrary
$1$-cycles on $\Sigma$. $\delta_1$, $\delta_2$ turn out to be
of type $(1,0)$
(you can get them by pairing the normal variation of $\Sigma$
with the holomorphic symplectic form on $T^* C$)
and thus
$\int_\Sigma \delta_1 \wedge \delta_2 = 0$.

Next we define a 2-form on $\cB$ by
\begin{equation}
  \omega = \DIP{\de Z, \de \overline{Z}}
\end{equation}
(or using a basis of $\Gamma^\gauge$ with 
$\IP{A^I, B_J} = \delta^I_J$, 
$\omega = \sum_{I = 1}^{n} \de Z(A^I) \wedge \de \overline{Z}(B_I)$.)

\begin{prop}[Positivity of $\omega$] $\omega$ is a
positive $(1,1)$-form on $\cB_\reg$ (and thus it defines
a \kahler metric on $\cB_\reg$).
\end{prop}

From the existence of $Z$ with the above properties
one can deduce all the structure
of special \kahler manifold on $\cB_\reg$. In particular,
for any choice of linearly independent 
vectors $A^1, \dots, A^r \in \Gamma^\gauge$
with $\IP{A^I, A^J} = 0$, lifted to $\tilde A^I \in \Gamma$, 
the functions
$a^I = Z_{\tilde A^I}$ give a local coordinate
system, so-called ``special coordinates.''


%  The transition maps between these local coordinate
% systems are valued in $\Sp(2r,\Z) \ltimes \C^r$.



\subsection{The semiflat metric}

% In particular there is a canonical $2$-form on the fiber

As we have said, $\cM_\vphi$ is a space of flat $U(1)$-connections
over $\Sigma_\vphi$, with fixed holonomies around the
punctures.
In particular, for each $\gamma \in \Gamma_\vphi$ 
there is a corresponding
holonomy $\theta_\gamma: \cM_\vphi \to \R / 2 \pi \Z$.
Their differentials can be assembled into
\begin{equation}
  \de \theta \in \Omega^1(\cM) \otimes (\Gamma^\gauge)^*.
\end{equation}
If we choose a basis for $\Gamma_\vphi$ 
then we get coordinates $\theta_1, \dots, \theta_{2r}$.

\begin{defn}[Semiflat metric]
The \ti{semiflat metric} on $\cM_\reg$ is the metric $g^\sf$ 
on $(\cM_\reg, I_1)$ with
\kahler form
\begin{equation}
  \omega^\sf_1 = 2 \DIP{\de Z, \de \bar{Z}} - \DIP{\de \theta, \de \theta}.
\end{equation}
\end{defn}

\fixme{write in local coords}

\fixme{remark this is exactly $g$ in abelian case?}


\subsection{The Hitchin section}

% We are almost ready to write down the semiflat metric.
% To do so, we will need a natural decomposition of
% $T \cM$ into horizontal and vertical. To define ``horizontal''
% we need to be able to compare nearby fibers $\cM_\vphi$.
% For this we use:

\begin{defn}[Hitchin section, for $G = \SU(2)$]
Choose a spin structure on $C$ and thus a line bundle
$K_C^\half$.
Given $\phi_2 \in \cB$ we consider the Higgs bundle
$(E,\varphi)$:
\begin{equation}
  E = K_C^{\half} \oplus K_C^{-\half}(-P), \qquad \varphi = \begin{pmatrix} 0 & \phi_2 \\ 1 & 0 \end{pmatrix}.
\end{equation}
Note $\phi_2$ is a section of $\Hom(K_C^{-\half}(-P), K_C^\half) \otimes K_C(P) = K_C(P)^2$ as needed, and by $1$ we mean the 
canonical section of $\Hom(K_C^\half, K_C^{-\half}(-P)) \otimes K_C(P) = \cO$. If at each $p \in P$ we set
$m^\R = (\pi,\pi)$,
and $m^\C = (\sqrt{\Res_p \phi_2}, -\sqrt{\Res_p \phi_2})$
then $(E,\varphi)$ is a stable \fixme{check} 
$(C,G,\vec{m})$-Higgs bundle
lying in the fiber over $\phi_2 \in \cB$.
This gives a section of the Hitchin map.
\end{defn}
There is a similar construction for other $G$. \fixme{give refs}



\section{Hyperkahler structure}

\subsection{The hyperkahler structure of $\cM$}

So far we have focused on just one of the complex
structures of $\cM$. Now let us look at the other
complex structures $I^\zeta$, $\zeta \in \C^\times$.
(note $I^{\zeta=0} = I_1, I^{\zeta = \I} = I_2, I^{\zeta = 1} = I_3$.)

Given a Higgs bundle $(E,\varphi)$ and 
solution $h$ of Hitchin's equations \eqref{eq:hitchin-equation}
there is a correponding $1$-parameter family of flat
$G_\C$-connections over $C$:
(where now we suppress the explicit $h$)
\begin{equation}
  \nabla(\zeta) = \zeta^{-1} \varphi + D + \zeta \varphi^\dagger
\end{equation}

\begin{prop} For any $\zeta \in \C^\times$,
the map $(E,\varphi) \to \nabla(\zeta)$ identifies
\begin{equation}
  (\cM, I^\zeta, \Omega^\zeta) \simarrow (\cM^\flat, \Omega^{AB})
\end{equation}
where $\cM^\flat = \cM^\flat(G, C, m_\zeta)$
is the moduli space of flat reductive 
$G_\C$-connections
over $C$ with some prescribed structure at the punctures ---
e.g. in the case of generic puncture data,
the holonomy around $p \in P$ has to be conjugate to 
the diagonal matrix $\exp(m_\zeta)$ with
\begin{equation}
m_\zeta = \zeta^{-1} m^\C + \I m^\R + \zeta \overline{m}^\C. 
\end{equation}
$\Omega^{AB}$ is the standard ``Atiyah-Bott'' symplectic
structure.
\end{prop}


\subsection{Our strategy}

In particular, this means that any holomorphic function $\cX$ of
the flat connection $\nabla(\zeta)$ becomes a holomorphic
function on $(\cM, I^\zeta)$.
Extending this to whole coordinate systems, any holomorphic 
Darboux coordinate system $\{\cX_i\}$ on $(\cM^\flat, \Omega^{AB})$
induces a holomorphic Darboux coordinate system on
$(\cM, I^\zeta)$.

Our aim is to use this idea to calculate holomorphic Darboux
coordinates $\cX_\gamma(\zeta)$ of a given fixed Higgs bundle,
in an ``explicit'' way,
in terms of the data $(Z, \theta)$.
Note that since $\nabla(\zeta)$ varies
\ti{holomorphically} with $\zeta$, the coordinates
$\cX_\gamma(\zeta)$ do as well.

\begin{itemize}
\item Q: Which holomorphic Darboux coordinate system on
$(\cM^\flat, \Omega^{AB})$ will you use? A: We actually
will not use just one: instead, as we move around on the
Hitchin base $\cB$ and/or vary $\zeta$, 
we will choose different coordinate
systems in different regions, separated by codimension-1 ``walls.''

\insfig{higgs-metric-6}{0.8}

\item Q: Why will you do that? A: Because we want to study
these coordinates through their analytic properties in the
$\zeta$-plane, and only certain coordinates are ``good''
as $\zeta \to 0, \infty$.

% \item Q: What does ``good'' mean? A: It means that
% as $\zeta \to 0, \infty$ they have controlled asymptotics:
% we will get as $\zeta \to 0$
% \begin{equation}
%   \cX_\gamma(\zeta) \sim c_\gamma \exp(\zeta^{-1} Z_\gamma + \I \theta_\gamma).
% \end{equation}

\item Q: How does this help you get the metric? A: On the
moduli space of Higgs bundles $(\cM, I_1)$ we 
already have the holomorphic
symplectic form $\Omega_1 = \omega_2 + \I \omega_3$. All that
is missing is the third symplectic form $\omega_1$.
Once we have holomorphic Darboux coordinate functions $\cX_\gamma(\zeta)$,
we can specialize them to say $\zeta = 1$ and get a formula
for the holomorphic symplectic form $\Omega^{\zeta = 1} = \Omega_3 = \omega_1 + \I \omega_2$; then the desired $\omega_1$ is just
$\re \Omega^{\zeta = 1}$.

\item Q: Won't the jumping of the $\cX_\gamma(\zeta)$ at the walls
cause a problem? A: No, the jumps are always by \ti{symplectomorphisms},
so that even though $\cX_\gamma(\zeta)$ jumps, $\Omega^\zeta$ doesn't.
\end{itemize}

A toy model for what we are doing would arise in the
case $G = \U(1)$. In that case we can say easily what
the good holomorphic Darboux coordinates are: they are
just the $\C^\times$-valued \ti{holonomies} of the 
complex flat connection $\nabla(\zeta)$, which are simply
\begin{equation}
  \cX_\gamma(\zeta) = \exp \left( \zeta^{-1} Z_\gamma + \I \theta_\gamma + \zeta \bar Z_\gamma \right).
\end{equation}
Using these coordinates at $\zeta = 1$ we get
\begin{equation}
 \omega_1 = \re \Omega_3 = \re \DIP{\de \log \cX, \de \log \cX} = 2 \DIP{\de Z, \de \bar{Z}} - \DIP{\de \theta, \de \theta}
\end{equation}
i.e. exactly the semiflat metric!

We could try to do similarly for general $G$.
The trouble is that in this case $\cX_\gamma(\zeta)$ 
given above is \ti{not} exactly a holomorphic function.
Nevetheless this is true ``asymptotically'',
in two different senses: both as we go to infinity 
in $\cM$ \ti{or} as $\zeta \to 0,\infty$.


\section{The coordinates}

What are the coordinates $\cX_\gamma(\zeta)$ on $(\cM, I^\zeta)$
which we will use?

Specialize to $G = \SU(2)$, and fix $\phi_2 \in \cB$
and $\zeta \in \C^\times$.
$\phi_2$ is a holomorphic section of $K_C(P)^2$, i.e.
a meromorphic quadratic differential on $C$ with
double poles at $P$, of residues $(m_p^\C)^2$.

\begin{defn}[$\zeta$-trajectories of a quadratic differential]
A \ti{$\zeta$-trajectory} of $\phi_2$ is a path on $C$
along which
$\zeta^{-1} \sqrt \phi_2$ (with either choice of sign
for $\sqrt{\phi_2}$) is a
\ti{real} and nowhere vanishing form.
% Call a $\vartheta$-trajectory \ti{maximal} if
% it is not properly contained in any other.
\end{defn}

\begin{prop}[$\zeta$-trajectories give a foliation] The
$\zeta$-trajectories are the leaves of a singular
foliation of $C$, with singularities at the zeroes
and poles of $\phi_2$. 
At each zero of $\phi_2$, the foliation
by $\zeta$-trajectories has a three-pronged singularity,
as shown below.
\insfig{higgs-metric-8}{0.8}
At each pole $p$ of $\phi_2$ with $\zeta^{-1} m^\C_p \notin \R$, 
the foliation has a ``spiraling'' singularity, as shown
below.
\insfig{higgs-metric-7}{1.0}
\end{prop}


\begin{prop}[Ideal triangulation determined by the
$\zeta$-trajectories]
Suppose $(\phi_2, \zeta)$ is generic, in the sense that
$\zeta^{-1} Z_\gamma \notin \R$ for all $\gamma \in \Gamma_{\phi_2}$. Then the $\vartheta$-trajectories determine an ideal
triangulation $T(\phi_2,\zeta)$ of $C$, by the picture below.
\end{prop}
\insfig{higgs-metric-9}{0.95}
\fixme{ref Strebel}

Now fix an edge $E \in T(\phi_2,\vartheta)$.
This edge determines a class $\gamma \in \Gamma_{\phi_2}$:
\insfig{higgs-metric-10}{1.0}
To define $\cX_\gamma(\zeta)$ we consider the connection
$\nabla(\zeta)$ restricted to the quadrilateral shown.
Its space of flat sections is a $2$-dimensional vector space $V$,
equipped with $4$ distinguished lines $\ell_i \subset V$:
$\ell_i$ consists of the flat sections
which have exponentially \ti{decaying} norm 
as we go into the $i$-th 
puncture along a leaf of $T(\phi_2,\zeta)$.
Said otherwise, the $\ell_i$ give $4$ points of $\C\PP^1$.
We define $\cX_\gamma(\zeta)$ to be the cross-ratio of 
these $4$ points. \fixme{Fock-Goncharov} \fixme{fix sign}

Making the same construction for all edges $E$
gives functions $\cX_\gamma(\zeta)$ with
$\gamma$ running over a basis for a finite-index sublattice 
of $\Gamma$. They are Darboux coordinates:
\begin{equation}
  \Omega^\zeta = \DIP{\de \log \cX, \de \log \cX}.
\end{equation}

The main asymptotic property of these coordinates is:
\begin{conj}
As $\zeta \to 0$ along any ray,
\begin{equation}
  \cX_\gamma(\zeta) \sim c_\gamma \exp \left(\zeta^{-1} Z_\gamma + \I \theta_\gamma \right).
\end{equation}
When $\theta_\gamma = 0$, $c_\gamma = 1$, so
\begin{equation}
  \cX_\gamma(\zeta) \sim \exp \left(\zeta^{-1} Z_\gamma\right).
\end{equation}
\end{conj}
(The idea: it should follow from the exact WKB method. Morally,
the connection $\nabla(\zeta) = \varphi / \zeta + \cdots$ 
is dominated by the leading term.)

As we vary $(\phi_2, \zeta)$ however, the
function $\cX_\gamma(\zeta)$ is generally not smooth: it suffers
a jump whenever the triangulation $T(\phi_2, \zeta)$
changes. 
\insfig{higgs-metric-11}{0.8}
This jump is associated with the ``saddle connection''
appearing in the middle.
It can only appear when $\zeta^{-1} Z_\mu \in \R_-$.
The coordinates on the two sides of the jump are related by:
\begin{equation}
  \cX_\gamma \to \cX_\gamma(1 + \cX_\mu)^{\IP{\mu,\gamma}}
\end{equation}
A similar phenomenon occurs when there are closed
trajectories: then we get a jump of the form
\begin{equation}
  \cX_\gamma \to \cX_\gamma(1 - \cX_\mu)^{-2 \IP{\mu,\gamma}}
\end{equation}
We can unify these to:
\begin{equation}
  \cX_\gamma \to \cX_\gamma(1 - \sigma(\mu) \cX_\mu)^{\DT(\mu) \IP{\mu,\gamma}}
\end{equation}
where for a saddle connection
we have $\DT(\mu) = +1$ and $\sigma(\mu) = -1$, while
for a closed loop we have $\DT(\mu) = -2$ and $\sigma(\mu) = +1$.

\begin{remark}[Wall structure on $\cB$]
Now suppose we fix $\zeta$ and move around in $\cM$.
We get an interesting structure on $\cB$:
\insfig{higgs-metric-12}{0.8}
Each simple discriminant point (where $\phi_2$ develops
a double zero) emits two walls. The walls are ``hyperplanes'' 
in the sense of the special \kahler structure, characterized
by $Z_{\pm \mu} / \zeta \in \R_-$, where $\mu$
is the vanishing cycle. Each wall carries a transformation
of the coordinates $\cX_\gamma$. When walls collide, they 
can generate new walls, as needed so that the $\cX_\gamma$
are well defined, a la Kontsevich-Soibelman.
\end{remark}


\begin{remark}[More interesting discriminant points]
When the discriminant meets itself, there's a more interesting
structure. Many things can happen; here are two:
\insfig{higgs-metric-13}{0.9}
At left is what happens when three zeroes of $\phi_2$ collide:
this produces a discriminant point which emits $5$ walls.
Each of these walls is carrying a transformation with
$\DT(\mu) = 1$.
At right is the example of $G = \SU(2)$, $g_C = 0$, 
$\abs{P}=4$: as we adjust all $m^\C$ to zero, so that 
all zeroes of $\phi_2$ move onto punctures,
the six discriminant points collapse into one.
The resulting point emits
walls with every rational slope, each one carrying 
a compound transformation with $\DT(\mu) = 8, \DT(2 \mu) = -2$.
\end{remark}

For our purpose right now though, what we really need 
is to understand what happens when 
we fix the Higgs bundle and just let $\zeta$
vary. Then we'll see $\cX_\gamma(\zeta)$ depending on 
$\zeta$ in a piecewise-analytic way:
\insfig{higgs-metric-14}{0.65}
There are invariants $\DT(\mu,\phi_2)$ which determine 
the jumps of the collection
$\{\cX_\gamma(\zeta)\}_{\gamma \in \Gamma}$ at the various
rays $Z_\mu / \zeta \in \R_-$.

\begin{example}
For example, in case $G = \SU(2)$, $g_C = 0$, 
$\abs{P}=4$, we can find
a domain in $\cB$ where there are jumps along exactly
$24$ rays, corresponding to $24$ lattice vectors $\gamma_1, \dots, \gamma_{24} \in \Gamma$ for which 
$\DT(\gamma_i) = 1$.
\end{example}

\begin{remark}
In ``wildly ramified'' examples it can be
even simpler: we can get jumps along just $4$ rays,
as shown in the picture above.
\end{remark}

\begin{remark}[Higher rank]
So far we focused on $G = \SU(2)$. The case of $G = \U(2)$ is more or
less the same. For $K>2$ the situation becomes more interesting:
instead of studying ideal triangulations $T(\phi_2, \zeta)$ 
one needs to study \ti{WKB spectral networks} $\cW(\vphi, \zeta)$.
Then again there is a recipe for invariants $\DT(\gamma)$
and coordinates $\cX_\gamma(\zeta)$. This recipe however 
depends on some conjectures:
most importantly, to construct the $\cX_\gamma(\zeta)$ 
one has to solve a certain linear algebra problem determined by the 
network $\cW(\vphi,\zeta)$.
Thus the construction has been carried out to the end in various special
cases but not for arbitrary $(G,C,\vec{m})$ and $(\vphi, \zeta)$.
\end{remark}

\section{The integral equation}

\begin{conj}[Integral equation for $\theta_\gamma = 0$]
When all $\theta_\gamma = 0$,
\begin{equation}
  \cX_\gamma(\zeta) = \cX_\gamma^\sf(\zeta) \exp \left[ \frac{1}{4\pi \I} \sum_{\mu \in \Gamma} \DT(\mu) \IP{\gamma,\mu} \int_{Z_\mu \R_-} \frac{\de \zeta'}{\zeta'} \frac{\zeta' + \zeta}{\zeta'-\zeta} \log(1 - \sigma(\mu) \cX_\mu(\zeta')) \right]
\end{equation}
where 
\begin{equation}
  \cX_\gamma^\sf(\zeta) = \exp \left( \zeta^{-1} Z_\gamma + \zeta \overline{Z}_\gamma \right).
\end{equation}
\end{conj}

Here $\sigma(\mu)$ is $-1$ when $\mu$ is the charge of a saddle connection,
and $+1$ when $\mu$ is the charge of a closed loop.

\begin{itemize}
  \item Q: Why this equation? A: It is expected to lead to $\cX_\gamma(\zeta)$ with
  the right analytic properties in the $\zeta$-plane: asymptotics as $\zeta \to 0,\infty$
  and jumps at the rays $Z_\mu / \zeta \in \R_-$ with $\DT(\mu) \neq 0$.
  The optimistic hope is that these analytic properties are strong enough
  to \ti{determine} $\cX_\gamma(\zeta)$.

  \item Q: How do you actually solve it? A: By iteration: pick
  $\cX_\gamma(\zeta) = \cX_\gamma^\sf(\zeta)$ as initial guess, 
  and then iterate.

  \item Q: Why would you think that that iteration would converge?
  A: If all $\abs{Z_\gamma}$ are large enough, and $\DT(\mu)$ doesn't grow too fast
  as a function of $\mu$ (e.g. if only finitely many are nonzero)
  saddle-point estimates show 
  the iteration defines a contraction mapping, so it must
  converge to a (unique) fixed point.

  \item Q: How does this lead to asymptotic predictions? A: 
  If we substitute $\cX = \cX^\sf$, the log in the
  integrand is bounded above by $\e^{-2 \abs{Z_\mu}}$;
  thus we expect that the first step of the iteration is already
  suppressed by $\e^{-2 M}$ where $M$ is the minimum $\abs{Z_\mu}$
  for which $\DT(\mu) \neq 0$, and later steps
  should be further exponentially suppressed. That suggests
  that just truncating to the zeroth iteration (i.e. taking $g^\sf$)
  would already give a result exponentially close to the true metric,
  and the accuracy will improve with each iteration we take.
  In particular we can truncate to the \ti{first} iteration.
  Working this out leads to
  \begin{equation}
    g = g^\sf - \frac{2}{\pi} \sum_{\mu \in \Gamma} \DT(\mu) K_0\left( 2 \abs{Z_\mu} \right) \de \abs{Z_\mu}^2 + \cdots
  \end{equation}
  where $K_0$ is the modified Bessel function.
  Note that $K_0(x) \sim \sqrt{\frac{\pi}{2x}} \e^{-x}$,
  so $g - g^\sf$ is already exponentially suppressed as $\e^{-2M}$.
  The omitted terms $\cdots$ should be of order $\e^{-4M}$.
\end{itemize}

\section{Numerical tests}

We consider the case of $G = \SU(2)$ with \ti{polynomial} quadratic differential,
of degree $n$, say
\begin{equation}
  \phi_2 = P(z) \de z^2,
\end{equation}
and Higgs bundles on the Hitchin section.
Solving Hitchin's equations in this case is equivalent to studying
harmonic maps $\C \to SL(2,\R) / SO(2)$ whose image is an ideal polygon
with $n+2$ vertices.

\insfig{higgs-metric-15}{0.8}

The $\cX_\gamma$ in this case are various cross-ratios of the asymptotic vertices.
For example, when $n=3$, we have $5$ asymptotic vertices and $\dim \cM = 2$, so
we pick $2$ out of the $5$ possible cross-ratios of those $5$ coordinates.
The triangulations $T(\phi_2, \zeta)$ look like:

\insfig{higgs-metric-16}{0.8}

\fixme{show numerical calc}

% \section{Donaldson-Thomas invariants}

% Now we are going to define a function
% \begin{equation}
%   \DT: \Gamma \to \Z.
% \end{equation}

% The definition of $\DT$ is easiest to understand in the
% case $K=2$, so let us consider that case first.
% The construction we will describe is closely related to one
% which appeared in the physics literature, first in \cite{Klemm:1996bj}.
% It was later described in \cite{Gaiotto:2009hg} where the application
% to the Hitchin system appeared.
% % Also, the invariants
% % we define here really \ti{are} generalized Donaldson-Thomas
% % invariants; this is shown in \cite{bridgelandsmith}.

% Fix a point $\vec\phi = (\phi_1, \phi_2) \in \cB'$.
% Most of what we say in this section is about the discriminant
% \begin{equation}
% \Delta = \phi_1^2 - 4 \phi_2.
% \end{equation}
% $\Delta$ is a holomorphic quadratic differential on $C$.

% Recall that the two sheets of $\Sigma_{\vec\phi}$ are given by
% (locally, in any domain where we can choose a single-valued $\sqrt{\Delta}$)
% \begin{equation}
%   \lambda_{\pm} = \half (-\phi_1 \pm \sqrt{\Delta})
% \end{equation}
% and in particular their difference is
% \begin{equation}
%   \lambda_+ - \lambda_- = \sqrt{\Delta}.
% \end{equation}

% \begin{defn}[$\vartheta$-trajectories of a quadratic differential]
% A \ti{$\vartheta$-trajectory} of $\Delta$ is a connected
% real $1$-manifold $p$ on $C$
% such that $e^{- \I \vartheta} \sqrt \Delta$ (with either choice of sign
% for $\sqrt{\Delta}$) is a
% \ti{real} and nowhere va nishing form on $p$.
% Call a $\vartheta$-trajectory \ti{maximal} if
% it is not properly contained in any other.
% \end{defn}

% Because of the sign ambiguity of $\sqrt{\Delta}$, there is no canonical
% way of orienting $\vartheta$-trajectories. However, once we pass to the
% double cover, we do get an orientation.

% % \begin{defn}[Orientation of lifted $\vartheta$-trajectories]
% % Given a $\vartheta$-trajectory $p$, its lift $\tilde{p} = \pi^{-1}(p)$
% % to $\Sigma_{\vec\phi}$ is canonically oriented. Indeed,
% % the two sheets of $\Sigma_{\vec\phi}$
% % correspond canonically to the two choices of $\sqrt{\Delta}$.
% % Thus we can orient $\tilde{p}$ by the condition that
% % in the positive direction, $e^{-\I \vartheta} \sqrt{\Delta}$
% % is positive.
% % \end{defn}

% Changing $\vartheta \to \vartheta+\pi$ preserves
% the notion of $\vartheta$-trajectory but reverses the
% orientation of the lifts.

% \insfig{higgs-bundles-17}{0.8}


% Let $C' = \{z: \Delta(z) \neq 0\} \subset C$.

% \begin{prop}[$\vartheta$-trajectories give a foliation] The
% $\vartheta$-trajectories are the leaves of a foliation of $C'$.
% \end{prop}
% % \begin{pf} Around any $z_0 \in C'$ we consider a local coordinate
% % $w$ given by $w(z) = \int^z_{z_0} \sqrt{\Delta}$. Then
% % we have $\Delta = \de w^2$. Thus in the coordinate $w$,
% % $\vartheta$-trajectories are just straight segments
% % of inclination angle $\vartheta$.
% % \end{pf}

% \begin{prop}[Local singularities of the foliation by $\vartheta$-trajectories] Around each zero of $\Delta$, the foliation
% by $\vartheta$-trajectories has a three-pronged singularity,
% as shown below.
% \insfig{higgs-bundles-18}{0.8}

% \end{prop}
% % \begin{pf} In a neighborhood of a zero of $\Delta$, we may choose a
% % local coordinate such that $\Delta = z\,\de z^2$, using our assumption that
% % all zeroes of $\Delta$ are simple.
% % % (Perhaps this is not really necessary: we could
% % % just make a linear change of coordinate, to arrange that the first-order term in the Taylor
% % % expansion of $\Delta$ is $z \, \de z^2$, and then take a small enough disc that
% % % we can neglect the deviation. But since we can get $z \, \de z^2$
% % % on the nose, we might as well.)

% % Then in any simply connected domain away from $z=0$ we have
% % $w = \int \sqrt{\Delta} = \frac23 z^{\frac32}$. In particular,
% % each of the three domains
% % \begin{equation}
% % \frac23 (\vartheta + n\pi) < \arg z < \frac23 (\vartheta + (n+1)\pi), \qquad n=0,1,2,
% % \end{equation}
% % is mapped by $w$ to a half-plane,
% % whose boundary is the line through $0$ of inclination $\vartheta$.
% % This gives the picture shown.
% % \end{pf}

% % \begin{exercise} Show that in a neighborhood of a zero of $\Delta$, we may choose a
% % local coordinate $z$ such that $\Delta = z\,\de z^2$.
% % \end{exercise}

% % \begin{exercise} Suppose we consider a quadratic differential $\Delta$
% % which is allowed to have higher-order zeroes. What is the behavior of
% % the foliation by $\vartheta$-trajectories around such a zero?
% % \end{exercise}

% Thus in the foliation by $\vartheta$-trajectories, there are finitely
% many special leaves, namely those which are asymptotic in one or
% both directions to zeroes of $\Delta$.

% % \begin{defn}[Forward and backward asymptotics of trajectories]
% % Given a maximal $\vartheta$-trajectory $p$ with a chosen orientation,
% % we say $p$ is \ti{forward asymptotic} (resp. \ti{backward asymptotic}) to $z$ if, choosing any oriented parameterization of $p$,
% % we have $\lim_{t \to \infty} p(t) = z$ (resp. $\lim_{t \to -\infty} p(t) = z$).
% % \end{defn}

% \begin{defn}[Critical trajectories] A maximal $\vartheta$-trajectory
% is called \ti{critical} if it admits an orientation for which
% it is backward asymptotic to a zero of $\Delta$.
% The \ti{$\vartheta$-critical graph} is the union of the critical trajectories and the
% zeroes of $\Delta$.
% \end{defn}

% Critical trajectories which are also \ti{forward} asymptotic
% to zeroes of $\Delta$ are particularly special:

% \begin{defn}[Saddle connections]
% A \ti{$\vartheta$-saddle connection} is a maximal
% $\vartheta$-trajectory $p$
% such that $\bar p \setminus p$ consists of two points of $C$.
% \end{defn}

% \insfig{higgs-bundles-19}{0.8}

% \begin{defn}[Charge of a saddle connection]
% If $p$ is a saddle connection, then the closure of $\tilde p$
% is an oriented loop on $\Sigma_{\vec \phi}$; the \ti{charge of $p$}
% is the class of this loop in $\Gamma_{\vec\phi} = H_1(\Sigma_{\vec\phi},\Z)$.
% \end{defn}

% \insfig{higgs-bundles-20}{0.8}

% There is one other way in which a trajectory can have finite length:

% \begin{defn}[Closed loops]
% A \ti{$\vartheta$-closed loop} is a maximal $\vartheta$-trajectory $p$
% such that the closure of $p$ has the topology of $S^1$.
% \end{defn}
% This includes the possibility that $p$ begins and ends
% at the same branch point.

% \insfig{higgs-bundles-22}{0.8}


% \begin{defn}[Charge of a closed loop]
% If $p$ is a closed loop, then $\tilde p$ is the union of two
% oriented loops on $\Sigma$; the \ti{charge} of $\tilde p$
% is the class of this union in $\Gamma_{\vec\phi} = H_1(\Sigma_{\vec\phi},\Z)$.
% \end{defn}

% \insfig{higgs-bundles-21}{0.8}

% \begin{defn}[Finite $\vartheta$-trajectories] A
% \ti{finite $\vartheta$-trajectory} is a $\vartheta$-saddle connection or
% $\vartheta$-closed loop.
% \end{defn}

% As we will now show, the existence of a finite $\vartheta$-trajectory is a
% non-generic phenomenon: for ``most'' angles $\vartheta$ they
% do not occur.

% \begin{lem}[Phase constraint for finite trajectories]
% If a $\vartheta$-finite trajectory exists with charge
% $\gamma$, then $e^{- \I \vartheta} Z_\gamma \in \R_+$.
% \end{lem}

% % \begin{pf}
% % Choose a $\sqrt{\Delta}$ over $p$, and orient $p$
% % so that $e^{-\I \vartheta} \sqrt{\Delta}$ is positive.
% % Then
% % \begin{equation}
% % Z_\gamma = \int_{\tilde p} \lambda = \int_p \lambda_+ - \lambda_- = \int_p \sqrt{\Delta}
% % \end{equation}
% % so
% % \begin{equation}
% %   e^{-\I \vartheta} Z_\gamma = \int_p e^{\I \vartheta} \sqrt{\Delta} > 0
% % \end{equation}
% % as desired.
% % \end{pf}

% In particular, finite $\vartheta$-trajectories can only
% occur at countably many phases $\vartheta$.

% % \begin{prop}[Landscape of finite $\vartheta$-trajectories]
% % Fix $\vartheta$ and $\vec\phi \in \cB'$. Then
% % the set of finite $\vartheta$-trajectories is described as follows.
% % There are finitely many
% % subsets of $C$ homeomorphic to open annuli (``ring domains''),
% % foliated by $\vartheta$-closed loops.
% % Each boundary of a ring domain can be a $\vartheta$-closed loop
% % or a union of $\vartheta$-saddle connections.
% % In addition there can be finitely many $\vartheta$-saddle connections elsewhere on
% % $C$.
% % \end{prop}


% \begin{pf} This is proven in \cite{MR743423}.
% \end{pf}

% \begin{defn}[\DT invariants]
% Fix $\vec\phi \in \cB_\reg$ and $\gamma \in \Gamma_{\vec \phi}$.
% $\DT(\gamma) \in \Z$ is a count of finite $\vartheta$-trajectories
% (of $\Delta$), where $\vartheta = \arg Z_\gamma$:
% \begin{equation}
%   \DT(\gamma) = (\# \text{ $\vartheta$-saddle connections of charge $\gamma$}) - 2 (\# \text{ $\vartheta$-ring domains of charge $\gamma$}).
% \end{equation}
% \end{defn}

% Note $\DT(\gamma) = \DT(-\gamma)$.

% % \begin{exercise} Show that $\DT(\gamma) = \DT(-\gamma)$.
% % \end{exercise}

% $\DT$ is \ti{not} a locally constant function of $\gamma$.
% Indeed, as we deform $\vec\phi$, saddle connections
% and/or ring domains may appear or disappear; this is
% the \ti{wall-crossing} phenomenon.





\printbibliography

\end{document}
